<!DOCTYPE html>
<html lang="es">





<head>
  <meta property="og:url" content="https://imlauera.github.io/controlar_porton_firebase/">
  <meta property="og:site_name" content="Imlauer">
  <meta property="og:title" content="Controlar portón con Firebase">
  <meta property="og:description" content="Antes de hacer esto grabé un servidor web en el ESP32 para abrir el portón pero funcionaba MAL se desconectaba el servidor y cuando andaba tenía mucho lag.
Tenía que conectarme al WiFi y acceder a la URL: http://192.168.0.25/32/on para abrir y cerrar http://192.168.0.25/32/off
MIT APP INVENTOR: https://ai2.appinventor.mit.edu/
Le cambié por 0 y 1:
Nota: El programa compartido en esta URL no me funcionó porque usa una librería vieja de Firebase y no me dió el código de la librería vieja tuve que usar otro codigo para el ESP32 pero sí usé la aplicación creada en el MIT APP solo hice unas pequeñas modificaciones como el PIN de salida y el nombre y el ícono de la app y la URL del firebase, etc.">
  <meta property="og:locale" content="es_es">
  <meta property="og:type" content="article">
    <meta property="article:published_time" content="2025-02-03T16:51:42-03:00">
    <meta property="article:modified_time" content="2025-02-03T16:51:42-03:00">
    <meta property="article:tag" content="Porton">

  
  <meta itemprop="name" content="Controlar portón con Firebase">
  <meta itemprop="description" content="Antes de hacer esto grabé un servidor web en el ESP32 para abrir el portón pero funcionaba MAL se desconectaba el servidor y cuando andaba tenía mucho lag.
Tenía que conectarme al WiFi y acceder a la URL: http://192.168.0.25/32/on para abrir y cerrar http://192.168.0.25/32/off
MIT APP INVENTOR: https://ai2.appinventor.mit.edu/
Le cambié por 0 y 1:
Nota: El programa compartido en esta URL no me funcionó porque usa una librería vieja de Firebase y no me dió el código de la librería vieja tuve que usar otro codigo para el ESP32 pero sí usé la aplicación creada en el MIT APP solo hice unas pequeñas modificaciones como el PIN de salida y el nombre y el ícono de la app y la URL del firebase, etc.">
  <meta itemprop="datePublished" content="2025-02-03T16:51:42-03:00">
  <meta itemprop="dateModified" content="2025-02-03T16:51:42-03:00">
  <meta itemprop="wordCount" content="596">
  <meta itemprop="keywords" content="Porton">
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Controlar portón con Firebase">
  <meta name="twitter:description" content="Antes de hacer esto grabé un servidor web en el ESP32 para abrir el portón pero funcionaba MAL se desconectaba el servidor y cuando andaba tenía mucho lag.
Tenía que conectarme al WiFi y acceder a la URL: http://192.168.0.25/32/on para abrir y cerrar http://192.168.0.25/32/off
MIT APP INVENTOR: https://ai2.appinventor.mit.edu/
Le cambié por 0 y 1:
Nota: El programa compartido en esta URL no me funcionó porque usa una librería vieja de Firebase y no me dió el código de la librería vieja tuve que usar otro codigo para el ESP32 pero sí usé la aplicación creada en el MIT APP solo hice unas pequeñas modificaciones como el PIN de salida y el nombre y el ícono de la app y la URL del firebase, etc.">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>
    
    Controlar portón con Firebase
    
  </title>
  <link rel="stylesheet" href='https://imlauera.github.io/css/site.min.css'>
  <link rel="canonical" href="https://imlauera.github.io/controlar_porton_firebase/">
  <link rel="alternate" type="application/rss&#43;xml" href="https://imlauera.github.io/index.xml" title="Imlauer">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer">
  <meta name="author" content="Imlauer.">
  <meta name="description" content="Antes de hacer esto grabé un servidor web en el ESP32 para abrir el portón pero funcionaba MAL se desconectaba el servidor y cuando andaba tenía mucho lag.
Tenía que conectarme al WiFi y acceder a la URL: http://192.168.0.25/32/on para abrir y cerrar http://192.168.0.25/32/off

MIT APP INVENTOR: https://ai2.appinventor.mit.edu/
Le cambié por 0 y 1:
Nota: El programa compartido en esta URL no me funcionó porque usa una librería vieja de Firebase y no me dió el código de la librería vieja tuve que usar otro codigo para el ESP32 pero sí usé la aplicación creada en el MIT APP solo hice unas pequeñas modificaciones como el PIN de salida y el nombre y el ícono de la app y la URL del firebase, etc.">
</head>
<body><nav class="navbar is-transparent " role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a class="navbar-item" href="https://imlauera.github.io/">
      <figure class="image">
        <img alt="" class="is-rounded" src="/img/memememe.jpg">
      </figure>
    </a>
    <a class="navbar-item" href="https://imlauera.github.io/">
      Imlauer
    </a>
    <a class="navbar-item" href="/acerca/">
      Acerca de Mi
    </a>
  </div>
  
  
</nav>

  <section>
    <section class='hero is-small is-link is-fullwidth'>
      <div class="hero-body">
<div class="container">
  <h1 class="title">
    Controlar portón con Firebase
  </h1>
  <h2 class="subtitle">
    <time datetime='2025-02-03T16:51:42-03:00'>
      February 03, 2025
    </time>
    
    <br>
    
    
    
    <a class="tag is-info" href="https://imlauera.github.io/tags/porton/">Porton</a>
    
    
    
  </h2>
</div>

      </div>
    </section>
    <section class="section">
      <div class="container">
<div class="content is-medium">
  <p>Antes de hacer esto grabé un servidor web en el ESP32 para abrir el portón pero funcionaba <strong>MAL</strong> se desconectaba el servidor y cuando andaba tenía mucho lag.</p>
<p>Tenía que conectarme al WiFi y acceder a la URL: http://192.168.0.25/32/on para abrir y cerrar http://192.168.0.25/32/off</p>
<hr>
<p>MIT APP INVENTOR: <a href="https://ai2.appinventor.mit.edu/">https://ai2.appinventor.mit.edu/</a></p>
<p>Le cambié por 0 y 1:</p>
<p><strong>Nota</strong>: El programa compartido en esta URL no me funcionó porque usa una librería vieja de Firebase y no me dió el código de la librería vieja tuve que usar otro codigo para el ESP32 pero sí usé la aplicación creada en el MIT APP solo hice unas pequeñas modificaciones como el PIN de salida y el nombre y el ícono de la app y la URL del firebase, etc.</p>
<p>Y en el programa de MIT APP le cambié &ldquo;ON&rdquo; y &ldquo;OFF&rdquo; por Math - 0 y 1</p>
<h4 id="acá-está-la-aplicación-de-android-hecha-en-mit-app-inventor-y-el-codigo-que-no-compila-para-el-esp32-explicado-anteriormente">Acá está la aplicación de Android hecha en MIT APP Inventor y el codigo que NO COMPILA para el ESP32 (explicado anteriormente)</h4>
<p><a href="http://kio4.com/arduino/117_Wemos_Firebase.htm">http://kio4.com/arduino/117_Wemos_Firebase.htm</a> (<a href="https://archive.is/Ytxyu">https://archive.is/Ytxyu</a>)</p>
<p><a href="http://kio4.com/appinventor/aplicaciones/p117_firebase_pulsador.aia">http://kio4.com/appinventor/aplicaciones/p117_firebase_pulsador.aia</a></p>
<p><strong>Ese código de esp32 no funcionó porque está desactualizado el código de Firebase usa una librería vieja.</strong></p>
<p>Lo que hice fue usar este código:<br>
<a href="https://github.com/MohammedArmanKhan/Turn-LED-ON-OFF-from-firebase-using-ESP32">https://github.com/MohammedArmanKhan/Turn-LED-ON-OFF-from-firebase-using-ESP32</a> (<a href="https://archive.is/dMYbr">https://archive.is/dMYbr</a>)</p>
<p>En donde contiene la librería vieja usada.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;WiFi.h&gt;                                                // esp32 library</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;IOXhop_FirebaseESP32.h&gt;                                             // firebase library</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#define FIREBASE_HOST &#34;tuhost&#34;                         </span><span style="color:#75715e">// the project name address from firebase id
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#define FIREBASE_AUTH &#34;tuclave&#34;                    </span><span style="color:#75715e">// the secret key generated from firebase
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#define WIFI_SSID &#34;tured&#34;                                          </span><span style="color:#75715e">// input your home or public wifi name
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#define WIFI_PASSWORD &#34;tuclave&#34;                                    </span><span style="color:#75715e">//password of wifi ssid
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>String fireStatus <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;                                                     <span style="color:#75715e">// led status received from firebase
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> led <span style="color:#f92672">=</span> <span style="color:#ae81ff">32</span>;                                                               
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setup</span>() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">begin</span>(<span style="color:#ae81ff">115200</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">delay</span>(<span style="color:#ae81ff">200000</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pinMode</span>(<span style="color:#ae81ff">32</span>, OUTPUT);                
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  WiFi.<span style="color:#a6e22e">begin</span>(WIFI_SSID, WIFI_PASSWORD);                                      <span style="color:#75715e">//try to connect with wifi
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;Connecting to &#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(WIFI_SSID);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">while</span> (WiFi.<span style="color:#a6e22e">status</span>() <span style="color:#f92672">!=</span> WL_CONNECTED) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;.&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">delay</span>(<span style="color:#ae81ff">500</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">println</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;Connected to &#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">println</span>(WIFI_SSID);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;IP Address is : &#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">println</span>(WiFi.<span style="color:#a6e22e">localIP</span>());                                                      <span style="color:#75715e">//print local IP address
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>  Firebase.<span style="color:#a6e22e">begin</span>(FIREBASE_HOST, FIREBASE_AUTH);                                       <span style="color:#75715e">// connect to firebase
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>  Firebase.<span style="color:#a6e22e">setString</span>(<span style="color:#e6db74">&#34;/ESP32/LED32&#34;</span>, <span style="color:#e6db74">&#34;0&#34;</span>);                                          <span style="color:#75715e">//send initial string of led status
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">loop</span>() {
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  fireStatus <span style="color:#f92672">=</span> Firebase.<span style="color:#a6e22e">getString</span>(<span style="color:#e6db74">&#34;/ESP32/LED32&#34;</span>);                     <span style="color:#75715e">// get led status input from firebase
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  Serial.<span style="color:#a6e22e">println</span>(fireStatus);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (fireStatus <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;1&#34;</span>) {                         <span style="color:#75715e">// compare the input of led status received from firebase
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    Serial.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Led Turned ON&#34;</span>);                 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">digitalWrite</span>(<span style="color:#ae81ff">32</span>, HIGH);                                                         <span style="color:#75715e">// make output led ON
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (fireStatus <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;0&#34;</span>) {              <span style="color:#75715e">// compare the input of led status received from firebase
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    Serial.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Led Turned OFF&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">digitalWrite</span>(<span style="color:#ae81ff">32</span>, LOW);                                                         <span style="color:#75715e">// make output led OFF
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Serial.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Wrong Credential! Please send ON/OFF&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="si-no-tenés-internet-podés-crear-un-punto-acceso-con-el-mismo-nombre-de-tu-red-y-la-misma-contraseña-y-apagar-el-modemrouter-así-el-esp32-se-conecta-al-punto-de-acceso-wifi-creado-por-tu-celular-y-podés-abrir-el-portón">Si no tenés internet, podés crear un punto acceso con el mismo nombre de tu red y la misma contraseña, y apagar el modem/router así el ESP32 se conecta al punto de acceso WiFi creado por tu celular y podés abrir el portón.</h3>
<p>OJO: Cuando usás wifi todo es inestable, lo mejor es usar Ethernet, pero si aún así querés usar wifi podés usar un watchdog timer: <a href="https://forum.arduino.cc/t/esp32-periodic-autoreset-possible-solved-1/577976">https://forum.arduino.cc/t/esp32-periodic-autoreset-possible-solved-1/577976</a> para que se apague automáticamente luego de un tiempo.</p>
<p>Ethernet: <a href="https://forum.arduino.cc/t/exemple-of-a-swtich-on-and-off-a-led-using-ethernet-shield/69032">https://forum.arduino.cc/t/exemple-of-a-swtich-on-and-off-a-led-using-ethernet-shield/69032</a></p>
<p><a href="https://forum.arduino.cc/t/ethernet-shield-and-a-led/207153">https://forum.arduino.cc/t/ethernet-shield-and-a-led/207153</a></p>
<p>Ejemplo uso de Ethernet shield</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#include &lt;SPI.h&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#include &lt;Ethernet.h&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#include &lt;Servo.h&gt;</span>
</span></span><span style="display:flex;"><span>Servo myservo;  // create servo object to control a servo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>byte mac<span style="color:#f92672">[]</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span> 0xDE, 0xAD, 0xBE, 0xEF, 0xFE, 0xED <span style="color:#f92672">}</span>; //physical mac address
</span></span><span style="display:flex;"><span>byte ip<span style="color:#f92672">[]</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span> 192, 168, 1, <span style="color:#ae81ff">102</span> <span style="color:#f92672">}</span>; // ip in lan
</span></span><span style="display:flex;"><span>byte gateway<span style="color:#f92672">[]</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span> 192, 168, 1, <span style="color:#ae81ff">1</span> <span style="color:#f92672">}</span>; // internet access via router
</span></span><span style="display:flex;"><span>byte subnet<span style="color:#f92672">[]</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span> 255, 255, 255, <span style="color:#ae81ff">0</span> <span style="color:#f92672">}</span>; //subnet mask
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>String readString;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>void setup<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>// Open serial communications and wait <span style="color:#66d9ef">for</span> port to open:
</span></span><span style="display:flex;"><span>Serial.begin<span style="color:#f92672">(</span>9600<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pinMode<span style="color:#f92672">(</span>13, OUTPUT<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>!Serial<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>; // wait <span style="color:#66d9ef">for</span> serial port to connect. Needed <span style="color:#66d9ef">for</span> Leonardo only
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// start the Ethernet connection and the server:
</span></span><span style="display:flex;"><span>Ethernet.begin<span style="color:#f92672">(</span>mac, ip, gateway, gateway, subnet<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div>
</div>


      </div>
    </section>
  </section><script 
src="/quiz/quizdown.js">
</script>
<script 
src="/quiz/quizdownKatex.js">
</script>
<script 
src="/quiz/quizdownHighlight.js">
</script>
<script>quizdown.register(quizdownHighlight).register(quizdownKatex).init()</script> 
<footer class="footer">
  <div class="content has-text-centered">
    
    
    <p>
      
      <a class="" href="https://imlauera.github.io/index.xml" target="_blank">
        <span>
          RSS
        </span>
      </a>
      
      | <a href="https://imlauera.github.io" target="_blank">Andres Imlauer.</a> 

      
      
    </p>
    
  </div>




<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({ tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]} })
</script>
</footer>


</body>
</html>
