<!DOCTYPE html>
<html lang="es">





<head>
  <meta property="og:url" content="https://imlauera.github.io/nixos_guix/">
  <meta property="og:site_name" content="Imlauer">
  <meta property="og:title" content="NixOS Guix">
  <meta property="og:description" content="Yes ‚Äî NixOS does use systemd by default.
Key points Init system: systemd Service manager: systemd Targets / units: standard systemd units (services, timers, sockets, etc.) NixOS integrates systemd deeply, but configures it declaratively via Nix instead of imperative commands.
How NixOS uses systemd (what‚Äôs different) You don‚Äôt usually write unit files by hand. Instead, you define services in configuration.nix, and NixOS generates the systemd units for you.
Example:
services.nginx.enable = true; This automatically creates and manages:">
  <meta property="og:locale" content="es_es">
  <meta property="og:type" content="article">
    <meta property="article:published_time" content="2025-12-18T05:34:34-03:00">
    <meta property="article:modified_time" content="2025-12-18T05:34:34-03:00">

  
  <meta itemprop="name" content="NixOS Guix">
  <meta itemprop="description" content="Yes ‚Äî NixOS does use systemd by default.
Key points Init system: systemd Service manager: systemd Targets / units: standard systemd units (services, timers, sockets, etc.) NixOS integrates systemd deeply, but configures it declaratively via Nix instead of imperative commands.
How NixOS uses systemd (what‚Äôs different) You don‚Äôt usually write unit files by hand. Instead, you define services in configuration.nix, and NixOS generates the systemd units for you.
Example:
services.nginx.enable = true; This automatically creates and manages:">
  <meta itemprop="datePublished" content="2025-12-18T05:34:34-03:00">
  <meta itemprop="dateModified" content="2025-12-18T05:34:34-03:00">
  <meta itemprop="wordCount" content="1359">
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="NixOS Guix">
  <meta name="twitter:description" content="Yes ‚Äî NixOS does use systemd by default.
Key points Init system: systemd Service manager: systemd Targets / units: standard systemd units (services, timers, sockets, etc.) NixOS integrates systemd deeply, but configures it declaratively via Nix instead of imperative commands.
How NixOS uses systemd (what‚Äôs different) You don‚Äôt usually write unit files by hand. Instead, you define services in configuration.nix, and NixOS generates the systemd units for you.
Example:
services.nginx.enable = true; This automatically creates and manages:">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>
    
    NixOS Guix
    
  </title>
  <link rel="stylesheet" href='https://imlauera.github.io/css/site.min.css'>
  <link rel="canonical" href="https://imlauera.github.io/nixos_guix/">
  <link rel="alternate" type="application/rss&#43;xml" href="https://imlauera.github.io/index.xml" title="Imlauer">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer">
  <meta name="author" content="Imlauer.">
  <meta name="description" content="Yes ‚Äî NixOS does use systemd by default.
Key points

Init system: systemd
Service manager: systemd
Targets / units: standard systemd units (services, timers, sockets, etc.)

NixOS integrates systemd deeply, but configures it declaratively via Nix instead of imperative commands.

How NixOS uses systemd (what‚Äôs different)
You don‚Äôt usually write unit files by hand. Instead, you define services in configuration.nix, and NixOS generates the systemd units for you.
Example:
services.nginx.enable = true;
This automatically creates and manages:">
</head>
<body><nav class="navbar is-transparent " role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a class="navbar-item" href="https://imlauera.github.io/">
      <figure class="image">
        <img alt="" class="is-rounded" src="/img/memememe.jpg">
      </figure>
    </a>
    <a class="navbar-item" href="https://imlauera.github.io/">
      Imlauer
    </a>
    <a class="navbar-item" href="/acerca/">
      Acerca de Mi
    </a>
  </div>
  
  
</nav>

  <section>
    <section class='hero is-small is-link is-fullwidth'>
      <div class="hero-body">
<div class="container">
  <h1 class="title">
    NixOS Guix
  </h1>
  <h2 class="subtitle">
    <time datetime='2025-12-18T05:34:34-03:00'>
      December 18, 2025
    </time>
    
  </h2>
</div>

      </div>
    </section>
    <section class="section">
      <div class="container">
<div class="content is-medium">
  <p>Yes ‚Äî <strong>NixOS does use systemd</strong> by default.</p>
<h3 id="key-points">Key points</h3>
<ul>
<li><strong>Init system:</strong> systemd</li>
<li><strong>Service manager:</strong> systemd</li>
<li><strong>Targets / units:</strong> standard systemd units (services, timers, sockets, etc.)</li>
</ul>
<p>NixOS integrates systemd deeply, but configures it <strong>declaratively</strong> via Nix instead of imperative commands.</p>
<hr>
<h3 id="how-nixos-uses-systemd-whats-different">How NixOS uses systemd (what‚Äôs different)</h3>
<p>You <strong>don‚Äôt usually write unit files by hand</strong>. Instead, you define services in <code>configuration.nix</code>, and NixOS generates the systemd units for you.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-nix" data-lang="nix"><span style="display:flex;"><span>services<span style="color:#f92672">.</span>nginx<span style="color:#f92672">.</span>enable <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
</span></span></code></pre></div><p>This automatically creates and manages:</p>
<ul>
<li><code>nginx.service</code></li>
<li>dependencies</li>
<li>users/groups</li>
<li>config files</li>
</ul>
<p>You can still interact with systemd normally:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>systemctl status nginx
</span></span><span style="display:flex;"><span>systemctl restart nginx
</span></span><span style="display:flex;"><span>journalctl -u nginx
</span></span></code></pre></div><hr>
<h3 id="custom-systemd-services-in-nixos">Custom systemd services in NixOS</h3>
<p>You <em>can</em> define your own units declaratively:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-nix" data-lang="nix"><span style="display:flex;"><span>systemd<span style="color:#f92672">.</span>services<span style="color:#f92672">.</span>my-service <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>  description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;My custom service&#34;</span>;
</span></span><span style="display:flex;"><span>  wantedBy <span style="color:#f92672">=</span> [ <span style="color:#e6db74">&#34;multi-user.target&#34;</span> ];
</span></span><span style="display:flex;"><span>  serviceConfig <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    ExecStart <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/path/to/binary&#34;</span>;
</span></span><span style="display:flex;"><span>    Restart <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;always&#34;</span>;
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><hr>
<h3 id="can-nixos-run-without-systemd">Can NixOS run without systemd?</h3>
<ul>
<li>Officially: <strong>no</strong></li>
<li>Practically: systemd is <strong>required</strong> for standard NixOS</li>
<li>Experimental alternatives exist (e.g. OpenRC), but they are <strong>unsupported and incomplete</strong></li>
</ul>
<p>If you want:</p>
<ul>
<li>‚ùå no systemd ‚Üí use <strong>Void Linux</strong>, <strong>Artix</strong>, or <strong>Gentoo</strong></li>
<li>‚úî declarative + systemd ‚Üí <strong>NixOS</strong></li>
</ul>
<hr>
<h3 id="summary">Summary</h3>
<table>
  <thead>
      <tr>
          <th>Question</th>
          <th>Answer</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Does NixOS use systemd?</td>
          <td>‚úÖ Yes</td>
      </tr>
      <tr>
          <td>Can you avoid systemd in NixOS?</td>
          <td>‚ùå Not realistically</td>
      </tr>
      <tr>
          <td>Is systemd optional?</td>
          <td>‚ùå</td>
      </tr>
      <tr>
          <td>Is it configured declaratively?</td>
          <td>‚úÖ</td>
      </tr>
  </tbody>
</table>
<p>If you want, I can compare <strong>NixOS vs Arch vs Gentoo vs Void</strong> from a system-design perspective.</p>
<hr>
<p>Yes ‚Äî <strong>Guix is very similar to NixOS in philosophy</strong>, <strong>but different in important technical choices</strong>.</p>
<p>Short answer first:</p>
<blockquote>
<p><strong>GNU Guix System does NOT use systemd.</strong></p>
</blockquote>
<hr>
<h2 id="guix-vs-nixos--the-big-picture">Guix vs NixOS ‚Äî the big picture</h2>
<table>
  <thead>
      <tr>
          <th>Aspect</th>
          <th>NixOS</th>
          <th>Guix System</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Package manager</td>
          <td>Nix</td>
          <td>Guix</td>
      </tr>
      <tr>
          <td>Language</td>
          <td>Nix expression language</td>
          <td>GNU Guile (Scheme)</td>
      </tr>
      <tr>
          <td>System config</td>
          <td>Declarative</td>
          <td>Declarative</td>
      </tr>
      <tr>
          <td>Reproducibility</td>
          <td>Yes</td>
          <td>Yes</td>
      </tr>
      <tr>
          <td>Rollbacks</td>
          <td>Yes</td>
          <td>Yes</td>
      </tr>
      <tr>
          <td>Default init</td>
          <td><strong>systemd</strong></td>
          <td><strong>GNU Shepherd</strong></td>
      </tr>
      <tr>
          <td>GNU ideology</td>
          <td>Neutral</td>
          <td>Strongly GNU / FSF</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="what-guix-uses-instead-of-systemd">What Guix uses instead of systemd</h2>
<h3 id="-gnu-shepherd">üêë <strong>GNU Shepherd</strong></h3>
<ul>
<li>Init system written in <strong>Guile (Scheme)</strong></li>
<li>Older name: <code>dmd</code></li>
<li>Much simpler than systemd</li>
<li>Focused only on service management</li>
</ul>
<p>Key characteristics:</p>
<ul>
<li>No PID 1 feature creep</li>
<li>No journal replacement</li>
<li>No device manager</li>
<li>No login manager</li>
<li>No tight coupling with everything</li>
</ul>
<p>Shepherd is closer to:</p>
<ul>
<li>runit</li>
<li>s6</li>
<li>OpenRC
than to systemd.</li>
</ul>
<hr>
<h2 id="example-defining-a-service-in-guix">Example: defining a service in Guix</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-scheme" data-lang="scheme"><span style="display:flex;"><span>(<span style="color:#a6e22e">service</span> nginx-service-type
</span></span><span style="display:flex;"><span>         (<span style="color:#a6e22e">nginx-configuration</span>
</span></span><span style="display:flex;"><span>           (<span style="color:#a6e22e">server-blocks</span>
</span></span><span style="display:flex;"><span>             (<span style="color:#a6e22e">list</span>
</span></span><span style="display:flex;"><span>               (<span style="color:#a6e22e">nginx-server-configuration</span>
</span></span><span style="display:flex;"><span>                 (<span style="color:#a6e22e">server-name</span> <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;example.com&#34;</span>))
</span></span><span style="display:flex;"><span>                 (<span style="color:#a6e22e">listen</span> <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;80&#34;</span>))))))
</span></span></code></pre></div><p>This generates:</p>
<ul>
<li>service definition</li>
<li>dependency graph</li>
<li>start/stop logic</li>
</ul>
<p>No unit files.</p>
<hr>
<h2 id="can-guix-use-systemd">Can Guix use systemd?</h2>
<ul>
<li>‚ùå <strong>No</strong></li>
<li>systemd is intentionally avoided</li>
<li>Guix aligns with FSF principles (systemd is considered non-GNU)</li>
</ul>
<hr>
<h2 id="similarities-with-nixos">Similarities with NixOS</h2>
<p>They share the <strong>same core ideas</strong>:</p>
<ul>
<li>Declarative OS configuration</li>
<li>Functional package management</li>
<li>Immutable store (<code>/gnu/store</code> vs <code>/nix/store</code>)</li>
<li>Atomic upgrades</li>
<li>Rollbacks</li>
<li>Profiles and generations</li>
</ul>
<p>They solve the <strong>same problems</strong>, but with different ideology.</p>
<hr>
<h2 id="major-differences-practical">Major differences (practical)</h2>
<h3 id="language">Language</h3>
<ul>
<li>NixOS: custom DSL (quirky)</li>
<li>Guix: full <strong>Scheme</strong> (powerful, consistent)</li>
</ul>
<h3 id="boot-speed">Boot speed</h3>
<ul>
<li>Guix + Shepherd is usually <strong>faster</strong> than systemd</li>
</ul>
<h3 id="hardware-support">Hardware support</h3>
<ul>
<li>NixOS: broader, more practical</li>
<li>Guix: more limited (especially firmware)</li>
</ul>
<h3 id="ecosystem">Ecosystem</h3>
<ul>
<li>NixOS: much larger</li>
<li>Guix: smaller, cleaner</li>
</ul>
<hr>
<h2 id="who-should-choose-guix">Who should choose Guix?</h2>
<p>Choose <strong>Guix</strong> if you want:</p>
<ul>
<li>No systemd</li>
<li>100% free software (or close)</li>
<li>Scheme-based config</li>
<li>Minimalism</li>
<li>FSF-aligned system</li>
</ul>
<p>Choose <strong>NixOS</strong> if you want:</p>
<ul>
<li>Best hardware support</li>
<li>systemd integration</li>
<li>Huge package ecosystem</li>
<li>More ‚Äúplug-and-play‚Äù</li>
</ul>
<hr>
<h2 id="tldr">TL;DR</h2>
<ul>
<li>‚úÖ Guix ‚âà NixOS philosophically</li>
<li>‚ùå Guix ‚â† systemd</li>
<li>üêë Guix uses <strong>GNU Shepherd</strong></li>
<li>üß† Same idea, different ideology</li>
</ul>
<p>If you want, I can help you decide <strong>Guix vs NixOS vs Artix vs Void</strong> based on how you actually use your machine.</p>
<hr>
<p>Yes ‚Äî but with <strong>important caveats</strong>. GNU Guix is <strong>FSF-pure by default</strong>, so it avoids non-free firmware, yet you <strong>can install non-free blobs manually</strong> if you really need them (like for Wi-Fi).</p>
<p>Here‚Äôs a breakdown.</p>
<hr>
<h2 id="1-what-guix-provides-out-of-the-box">1Ô∏è‚É£ What Guix provides out of the box</h2>
<ul>
<li>Only <strong>free firmware</strong> is included (mostly for some Intel or open Broadcom chips).</li>
<li>Most Wi-Fi requiring <strong>proprietary firmware</strong> (Broadcom, Realtek) is <strong>not included</strong>.</li>
<li>System won‚Äôt load non-free blobs automatically ‚Äî FSF policy.</li>
</ul>
<hr>
<h2 id="2-ways-to-get-non-free-firmware-on-guix">2Ô∏è‚É£ Ways to get non-free firmware on Guix</h2>
<h3 id="option-a--use-guix-operating-system-config-hooks">Option A ‚Äî Use Guix <code>operating-system</code> config hooks</h3>
<p>You can copy firmware to <code>/etc/firmware</code> or <code>/lib/firmware</code> and load it via kernel modules.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-scheme" data-lang="scheme"><span style="display:flex;"><span>(<span style="color:#a6e22e">operating-system</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; ...</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#a6e22e">file-systems</span>
</span></span><span style="display:flex;"><span>    (<span style="color:#a6e22e">cons*</span> (<span style="color:#a6e22e">file-system</span>
</span></span><span style="display:flex;"><span>             (<span style="color:#a6e22e">mount-point</span> <span style="color:#e6db74">&#34;/lib/firmware&#34;</span>)
</span></span><span style="display:flex;"><span>             (<span style="color:#a6e22e">device</span> <span style="color:#66d9ef">#f</span>)
</span></span><span style="display:flex;"><span>             (<span style="color:#a6e22e">type</span> <span style="color:#e6db74">&#34;tmpfs&#34;</span>)
</span></span><span style="display:flex;"><span>             (<span style="color:#a6e22e">options</span> <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;mode=755&#34;</span>)))
</span></span><span style="display:flex;"><span>           %base-file-systems))
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; Hook to copy firmware</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#a6e22e">packages</span> (<span style="color:#a6e22e">append</span>
</span></span><span style="display:flex;"><span>             (list (<span style="color:#a6e22e">local-file</span> <span style="color:#e6db74">&#34;path/to/your/firmware/driver.bin&#34;</span>))
</span></span><span style="display:flex;"><span>             %base-packages)))
</span></span></code></pre></div><p>Then the kernel module can pick it up.</p>
<hr>
<h3 id="option-b--use-guixs---substitute-binary-feature">Option B ‚Äî Use Guix‚Äôs <code>--substitute-binary</code> feature</h3>
<p>Guix allows <strong>binary substitution</strong> for packages that are not in FSF repo.
This is advanced; usually involves:</p>
<ol>
<li>Downloading precompiled firmware blobs</li>
<li>Importing them as <code>local-package</code> definitions</li>
<li>Adding them to your system profile</li>
</ol>
<hr>
<h3 id="option-c--dual-boot--hybrid-approach">Option C ‚Äî Dual-boot / hybrid approach</h3>
<p>Some users:</p>
<ul>
<li>Boot Guix on <strong>free firmware hardware</strong></li>
<li>Or use a <strong>USB stick with non-free firmware preloaded</strong></li>
<li>Then Guix sees the device as working</li>
</ul>
<hr>
<h2 id="3-wi-fi-specifics">3Ô∏è‚É£ Wi-Fi specifics</h2>
<ul>
<li>Broadcom chips: almost always need <strong>non-free <code>b43</code> or <code>wl</code> firmware</strong></li>
<li>Realtek: often need <code>rtlwifi</code> blobs</li>
<li>Intel: mostly free, works out of the box</li>
</ul>
<p>Check with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>lspci -nnk | grep -iA3 net
</span></span></code></pre></div><hr>
<h2 id="4-caveats">4Ô∏è‚É£ Caveats</h2>
<ul>
<li>Installing non-free firmware <strong>breaks FSF purity</strong></li>
<li>Updates may not be smooth, you may need to manually re-copy blobs on kernel updates</li>
<li>Guix community generally recommends <strong>Intel or Atheros cards</strong> for 100% free experience</li>
</ul>
<hr>
<h2 id="-tldr">‚úÖ TL;DR</h2>
<ul>
<li>Guix doesn‚Äôt include non-free Wi-Fi firmware by default.</li>
<li>You <strong>can install it manually</strong> (copy blobs + kernel modules).</li>
<li>If you want FSF-pure, use <strong>Intel/Atheros</strong> Wi-Fi.</li>
<li>If you need Broadcom/Realtek, you need <strong>manual intervention</strong>.</li>
</ul>
<hr>
<p>If you want, I can give you a <strong>step-by-step example</strong> to make a Broadcom Wi-Fi chip fully work on Guix, including config snippets. Do you want me to do that?</p>
<hr>
<p>Perfect! Let‚Äôs go <strong>step by step</strong> for getting a <strong>non-free Wi-Fi driver working on Guix System</strong>. I‚Äôll make it clear, <strong>declarative where possible</strong>, while keeping it practical.</p>
<p>We‚Äôll assume your Wi-Fi card requires a proprietary firmware blob (like Broadcom or some Realtek chips).</p>
<hr>
<h2 id="1-identify-your-wi-fi-card">1Ô∏è‚É£ Identify your Wi-Fi card</h2>
<p>Open a terminal:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>lspci -nnk | grep -iA3 net
</span></span></code></pre></div><p>Output example:</p>
<pre tabindex="0"><code>03:00.0 Network controller [0280]: Broadcom Inc. and subsidiaries BCM43142 802.11b/g/n [14e4:4365]
        Subsystem: Hewlett-Packard Company BCM43142 802.11b/g/n
        Kernel driver in use: wl
</code></pre><p>‚úÖ Note:</p>
<ul>
<li><code>14e4:4365</code> ‚Üí PCI ID</li>
<li><code>Kernel driver in use</code> may show <code>b43</code> or <code>wl</code></li>
<li>You need a firmware blob that matches your card</li>
</ul>
<hr>
<h2 id="2-get-the-proprietary-firmware">2Ô∏è‚É£ Get the proprietary firmware</h2>
<ul>
<li>Go to the manufacturer site or trusted repository (Broadcom, Realtek, etc.)</li>
<li>For Broadcom BCM43142: get <code>wl_apsta.o</code> (or <code>.bin</code>) firmware</li>
<li>Save it to a folder, e.g.:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir -p ~/firmware
</span></span><span style="display:flex;"><span>cp wl_apsta.o ~/firmware/
</span></span></code></pre></div><hr>
<h2 id="3-copy-firmware-to-libfirmware">3Ô∏è‚É£ Copy firmware to <code>/lib/firmware</code></h2>
<p>Guix expects firmware in <code>/lib/firmware</code> (or a subdirectory used by the kernel module):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo cp ~/firmware/* /lib/firmware/
</span></span></code></pre></div><hr>
<h2 id="4-load-the-kernel-module">4Ô∏è‚É£ Load the kernel module</h2>
<p>For Broadcom, for example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo modprobe wl
</span></span></code></pre></div><p>Check your Wi-Fi interface:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ip link
</span></span></code></pre></div><p>You should see <code>wlan0</code> or similar.</p>
<hr>
<h2 id="5-make-it-persistent-declarative-approach">5Ô∏è‚É£ Make it persistent (declarative approach)</h2>
<p>Guix lets you <strong>include local packages</strong> in your system configuration. Create a <strong>local package for the firmware</strong>:</p>
<h3 id="a-create-a-folder-for-local-packages">a) Create a folder for local packages:</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir -p ~/guix-packages
</span></span></code></pre></div><h3 id="b-define-a-local-package-firmware-broadcomscm">b) Define a local package <code>firmware-broadcom.scm</code>:</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-scheme" data-lang="scheme"><span style="display:flex;"><span>(<span style="color:#a6e22e">use-modules</span> (<span style="color:#a6e22e">guix</span> packages)
</span></span><span style="display:flex;"><span>             (<span style="color:#a6e22e">guix</span> download)
</span></span><span style="display:flex;"><span>             (<span style="color:#a6e22e">guix</span> build-system trivial)
</span></span><span style="display:flex;"><span>             (<span style="color:#a6e22e">guix</span> licenses))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(<span style="color:#a6e22e">define-public</span> firmware-broadcom
</span></span><span style="display:flex;"><span>  (<span style="color:#a6e22e">package</span>
</span></span><span style="display:flex;"><span>    (<span style="color:#a6e22e">name</span> <span style="color:#e6db74">&#34;firmware-broadcom&#34;</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#a6e22e">version</span> <span style="color:#e6db74">&#34;1.0&#34;</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#a6e22e">source</span> (<span style="color:#a6e22e">local-file</span> <span style="color:#e6db74">&#34;/home/username/firmware/wl_apsta.o&#34;</span>))
</span></span><span style="display:flex;"><span>    (<span style="color:#a6e22e">build-system</span> trivial-build-system)
</span></span><span style="display:flex;"><span>    (<span style="color:#a6e22e">arguments</span> <span style="color:#f92672">`</span>(<span style="color:#f92672">#</span>:install-file ((<span style="color:#e6db74">&#34;wl_apsta.o&#34;</span> <span style="color:#e6db74">&#34;share/firmware/wl_apsta.o&#34;</span>))))
</span></span><span style="display:flex;"><span>    (<span style="color:#a6e22e">home-page</span> <span style="color:#e6db74">&#34;https://www.broadcom.com&#34;</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#a6e22e">synopsis</span> <span style="color:#e6db74">&#34;Proprietary Broadcom Wi-Fi firmware&#34;</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#a6e22e">description</span> <span style="color:#e6db74">&#34;Firmware blob for Broadcom Wi-Fi chips&#34;</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#a6e22e">license</span> non-free)))
</span></span></code></pre></div><hr>
<h3 id="c-add-to-your-system-configuration">c) Add to your system configuration</h3>
<p>Edit <code>/etc/config.scm</code> (or wherever your <code>operating-system</code> block is):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-scheme" data-lang="scheme"><span style="display:flex;"><span>(<span style="color:#a6e22e">operating-system</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; ...</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#a6e22e">packages</span>
</span></span><span style="display:flex;"><span>   (<span style="color:#a6e22e">append</span>
</span></span><span style="display:flex;"><span>    (list (<span style="color:#a6e22e">local-package</span> <span style="color:#e6db74">&#34;firmware-broadcom&#34;</span> <span style="color:#e6db74">&#34;~/guix-packages/firmware-broadcom.scm&#34;</span>))
</span></span><span style="display:flex;"><span>    %base-packages))
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><hr>
<h3 id="d-rebuild-system">d) Rebuild system</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo guix system reconfigure /etc/config.scm
</span></span></code></pre></div><p>‚úÖ This will:</p>
<ul>
<li>Copy the firmware to <code>/gnu/store/.../share/firmware/...</code></li>
<li>Make it part of your system declaratively</li>
<li>Rollback possible if anything breaks</li>
</ul>
<hr>
<h2 id="6-load-module-on-boot">6Ô∏è‚É£ Load module on boot</h2>
<p>Add the kernel module to <code>operating-system</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-scheme" data-lang="scheme"><span style="display:flex;"><span>(<span style="color:#a6e22e">operating-system</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; ...</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#a6e22e">linux-modules</span> (cons <span style="color:#e6db74">&#34;wl&#34;</span> %base-linux-modules))
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><p>Reconfigure again:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo guix system reconfigure /etc/config.scm
</span></span></code></pre></div><p>Now your non-free Wi-Fi driver is <strong>persistent and declarative</strong>.</p>
<hr>
<h2 id="7-connect-to-wi-fi">7Ô∏è‚É£ Connect to Wi-Fi</h2>
<p>You can use <strong>NetworkManager</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl start NetworkManager
</span></span><span style="display:flex;"><span>nmcli device wifi list
</span></span><span style="display:flex;"><span>nmcli device wifi connect <span style="color:#e6db74">&#34;SSID_NAME&#34;</span> password <span style="color:#e6db74">&#34;YOUR_PASSWORD&#34;</span>
</span></span></code></pre></div><hr>
<h2 id="-summary">‚úÖ Summary</h2>
<ol>
<li>Identify Wi-Fi chip with <code>lspci</code>.</li>
<li>Download the proprietary firmware blob.</li>
<li>Copy it to <code>/lib/firmware</code> for immediate testing.</li>
<li>Load the kernel module manually (<code>modprobe wl</code>).</li>
<li>Wrap firmware as a <strong>local package</strong> in Guix.</li>
<li>Add package and kernel module to <code>operating-system</code> declaratively.</li>
<li>Reconfigure with <code>guix system reconfigure</code>.</li>
<li>Connect via NetworkManager.</li>
</ol>
<hr>
<p>If you want, I can make a <strong>ready-to-paste Guix snippet for Broadcom and Realtek chips</strong> so you can just drop it in your config and rebuild ‚Äî fully declarative.</p>
<p>Do you want me to do that?</p>

</div>


      </div>
    </section>
  </section><script 
src="/quiz/quizdown.js">
</script>
<script 
src="/quiz/quizdownKatex.js">
</script>
<script 
src="/quiz/quizdownHighlight.js">
</script>
<script>quizdown.register(quizdownHighlight).register(quizdownKatex).init()</script> 
<footer class="footer">
  <div class="content has-text-centered">
    
    
    <p>
      
      <a class="" href="https://imlauera.github.io/index.xml" target="_blank">
        <span>
          RSS
        </span>
      </a>
      
      | <a href="https://imlauera.github.io" target="_blank">Andres Imlauer.</a> 

      
      
    </p>
    
  </div>




<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({ tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]} })
</script>
</footer>


</body>
</html>
