<!DOCTYPE html>
<html lang="es">





<head>
  <meta property="og:url" content="https://imlauera.github.io/gentoo_vm/">
  <meta property="og:site_name" content="Imlauer">
  <meta property="og:title" content="Gentoo VM desde la TTY.">
  <meta property="og:description" content="Decime como bootearlo dame los comandos no me tires un texto tan largo. [I] esotericwarfare@arch ~&gt; wget https://mimas.co.ext.planetunix.net/pub/gentoo/releases/amd64/autobuilds/current-di-amd64-cloudinit/di-amd64-cloudinit-20251228T163057Z.qcow2 --2025-12-30 11:54:22-- https://mimas.co.ext.planetunix.net/pub/gentoo/releases/amd64/autobuilds/current-di-amd64-cloudinit/di-amd64-cloudinit-20251228T163057Z.qcow2 Loaded CA certificate &#39;/etc/ssl/certs/ca-certificates.crt&#39; Resolving mimas.co.ext.planetunix.net (mimas.co.ext.planetunix.net)... 38.180.182.84, 2a02:c6c1:151:202:0:1:0:10 Connecting to mimas.co.ext.planetunix.net (mimas.co.ext.planetunix.net)|38.180.182.84|:443... connected. HTTP request sent, awaiting response... 200 OK Length: 1398931456 (1.3G) [text/plain] Saving to: ‘di-amd64-cloudinit-20251228T163057Z.qcow2’ di-amd64-cloudinit-20251228T163057Z.qcow2 100%[======================================================================================================&gt;] 1.30G 4.88MB/s in 3m 1s Last-modified header invalid -- time-stamp ignored. 2025-12-30 11:57:24 (7.37 MB/s) - ‘di-amd64-cloudinit-20251228T163057Z.qcow2’ saved [1398931456/1398931456] # Crear cloud-init ISO cat &gt; user-data &lt;&lt; EOF #cloud-config users: - name: gentoo sudo: ALL=(ALL) NOPASSWD:ALL ssh_authorized_keys: - $(cat ~/.ssh/id_rsa.pub) chpasswd: list: | gentoo:gentoo expire: false ssh_pwauth: true EOF echo &#34;instance-id: vm1&#34; &gt; meta-data genisoimage -output cloud-init.iso -volid cidata -joliet -rock user-data meta-data # Bootear la VM qemu-system-x86_64 \ -enable-kvm \ -m 2048 \ -cpu host \ -smp 2 \ -drive file=di-amd64-cloudinit-20251228T163057Z.qcow2,format=qcow2,if=virtio \ -cdrom cloud-init.iso \ -net nic,model=virtio \ -net user,hostfwd=tcp::2222-:22 \ -nographic # Conectar por SSH (desde otra terminal) ssh -p 2222 gentoo@localhost Si no tenés genisoimage: pacman -S cdrtools">
  <meta property="og:locale" content="es_es">
  <meta property="og:type" content="article">
    <meta property="article:published_time" content="2025-12-30T12:00:30-03:00">
    <meta property="article:modified_time" content="2025-12-30T12:00:30-03:00">
    <meta property="article:tag" content="Vm">

  
  <meta itemprop="name" content="Gentoo VM desde la TTY.">
  <meta itemprop="description" content="Decime como bootearlo dame los comandos no me tires un texto tan largo. [I] esotericwarfare@arch ~&gt; wget https://mimas.co.ext.planetunix.net/pub/gentoo/releases/amd64/autobuilds/current-di-amd64-cloudinit/di-amd64-cloudinit-20251228T163057Z.qcow2 --2025-12-30 11:54:22-- https://mimas.co.ext.planetunix.net/pub/gentoo/releases/amd64/autobuilds/current-di-amd64-cloudinit/di-amd64-cloudinit-20251228T163057Z.qcow2 Loaded CA certificate &#39;/etc/ssl/certs/ca-certificates.crt&#39; Resolving mimas.co.ext.planetunix.net (mimas.co.ext.planetunix.net)... 38.180.182.84, 2a02:c6c1:151:202:0:1:0:10 Connecting to mimas.co.ext.planetunix.net (mimas.co.ext.planetunix.net)|38.180.182.84|:443... connected. HTTP request sent, awaiting response... 200 OK Length: 1398931456 (1.3G) [text/plain] Saving to: ‘di-amd64-cloudinit-20251228T163057Z.qcow2’ di-amd64-cloudinit-20251228T163057Z.qcow2 100%[======================================================================================================&gt;] 1.30G 4.88MB/s in 3m 1s Last-modified header invalid -- time-stamp ignored. 2025-12-30 11:57:24 (7.37 MB/s) - ‘di-amd64-cloudinit-20251228T163057Z.qcow2’ saved [1398931456/1398931456] # Crear cloud-init ISO cat &gt; user-data &lt;&lt; EOF #cloud-config users: - name: gentoo sudo: ALL=(ALL) NOPASSWD:ALL ssh_authorized_keys: - $(cat ~/.ssh/id_rsa.pub) chpasswd: list: | gentoo:gentoo expire: false ssh_pwauth: true EOF echo &#34;instance-id: vm1&#34; &gt; meta-data genisoimage -output cloud-init.iso -volid cidata -joliet -rock user-data meta-data # Bootear la VM qemu-system-x86_64 \ -enable-kvm \ -m 2048 \ -cpu host \ -smp 2 \ -drive file=di-amd64-cloudinit-20251228T163057Z.qcow2,format=qcow2,if=virtio \ -cdrom cloud-init.iso \ -net nic,model=virtio \ -net user,hostfwd=tcp::2222-:22 \ -nographic # Conectar por SSH (desde otra terminal) ssh -p 2222 gentoo@localhost Si no tenés genisoimage: pacman -S cdrtools">
  <meta itemprop="datePublished" content="2025-12-30T12:00:30-03:00">
  <meta itemprop="dateModified" content="2025-12-30T12:00:30-03:00">
  <meta itemprop="wordCount" content="548">
  <meta itemprop="keywords" content="Vm">
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Gentoo VM desde la TTY.">
  <meta name="twitter:description" content="Decime como bootearlo dame los comandos no me tires un texto tan largo. [I] esotericwarfare@arch ~&gt; wget https://mimas.co.ext.planetunix.net/pub/gentoo/releases/amd64/autobuilds/current-di-amd64-cloudinit/di-amd64-cloudinit-20251228T163057Z.qcow2 --2025-12-30 11:54:22-- https://mimas.co.ext.planetunix.net/pub/gentoo/releases/amd64/autobuilds/current-di-amd64-cloudinit/di-amd64-cloudinit-20251228T163057Z.qcow2 Loaded CA certificate &#39;/etc/ssl/certs/ca-certificates.crt&#39; Resolving mimas.co.ext.planetunix.net (mimas.co.ext.planetunix.net)... 38.180.182.84, 2a02:c6c1:151:202:0:1:0:10 Connecting to mimas.co.ext.planetunix.net (mimas.co.ext.planetunix.net)|38.180.182.84|:443... connected. HTTP request sent, awaiting response... 200 OK Length: 1398931456 (1.3G) [text/plain] Saving to: ‘di-amd64-cloudinit-20251228T163057Z.qcow2’ di-amd64-cloudinit-20251228T163057Z.qcow2 100%[======================================================================================================&gt;] 1.30G 4.88MB/s in 3m 1s Last-modified header invalid -- time-stamp ignored. 2025-12-30 11:57:24 (7.37 MB/s) - ‘di-amd64-cloudinit-20251228T163057Z.qcow2’ saved [1398931456/1398931456] # Crear cloud-init ISO cat &gt; user-data &lt;&lt; EOF #cloud-config users: - name: gentoo sudo: ALL=(ALL) NOPASSWD:ALL ssh_authorized_keys: - $(cat ~/.ssh/id_rsa.pub) chpasswd: list: | gentoo:gentoo expire: false ssh_pwauth: true EOF echo &#34;instance-id: vm1&#34; &gt; meta-data genisoimage -output cloud-init.iso -volid cidata -joliet -rock user-data meta-data # Bootear la VM qemu-system-x86_64 \ -enable-kvm \ -m 2048 \ -cpu host \ -smp 2 \ -drive file=di-amd64-cloudinit-20251228T163057Z.qcow2,format=qcow2,if=virtio \ -cdrom cloud-init.iso \ -net nic,model=virtio \ -net user,hostfwd=tcp::2222-:22 \ -nographic # Conectar por SSH (desde otra terminal) ssh -p 2222 gentoo@localhost Si no tenés genisoimage: pacman -S cdrtools">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>
    
    Gentoo VM desde la TTY.
    
  </title>
  <link rel="stylesheet" href='https://imlauera.github.io/css/site.min.css'>
  <link rel="canonical" href="https://imlauera.github.io/gentoo_vm/">
  <link rel="alternate" type="application/rss&#43;xml" href="https://imlauera.github.io/index.xml" title="Imlauer">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer">
  <meta name="author" content="Imlauer.">
  <meta name="description" content="Decime como bootearlo dame los comandos no me tires un texto tan largo. [I] esotericwarfare@arch ~&gt; wget https://mimas.co.ext.planetunix.net/pub/gentoo/releases/amd64/autobuilds/current-di-amd64-cloudinit/di-amd64-cloudinit-20251228T163057Z.qcow2
--2025-12-30 11:54:22--  https://mimas.co.ext.planetunix.net/pub/gentoo/releases/amd64/autobuilds/current-di-amd64-cloudinit/di-amd64-cloudinit-20251228T163057Z.qcow2
Loaded CA certificate &#39;/etc/ssl/certs/ca-certificates.crt&#39;
Resolving mimas.co.ext.planetunix.net (mimas.co.ext.planetunix.net)... 38.180.182.84, 2a02:c6c1:151:202:0:1:0:10
Connecting to mimas.co.ext.planetunix.net (mimas.co.ext.planetunix.net)|38.180.182.84|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 1398931456 (1.3G) [text/plain]
Saving to: ‘di-amd64-cloudinit-20251228T163057Z.qcow2’
di-amd64-cloudinit-20251228T163057Z.qcow2       100%[======================================================================================================&gt;]   1.30G  4.88MB/s    in 3m 1s   
Last-modified header invalid -- time-stamp ignored.
2025-12-30 11:57:24 (7.37 MB/s) - ‘di-amd64-cloudinit-20251228T163057Z.qcow2’ saved [1398931456/1398931456]

# Crear cloud-init ISO
cat &gt; user-data &lt;&lt; EOF
#cloud-config
users:
  - name: gentoo
    sudo: ALL=(ALL) NOPASSWD:ALL
    ssh_authorized_keys:
      - $(cat ~/.ssh/id_rsa.pub)
chpasswd:
  list: |
    gentoo:gentoo
  expire: false
ssh_pwauth: true
EOF

echo &#34;instance-id: vm1&#34; &gt; meta-data

genisoimage -output cloud-init.iso -volid cidata -joliet -rock user-data meta-data

# Bootear la VM
qemu-system-x86_64 \
  -enable-kvm \
  -m 2048 \
  -cpu host \
  -smp 2 \
  -drive file=di-amd64-cloudinit-20251228T163057Z.qcow2,format=qcow2,if=virtio \
  -cdrom cloud-init.iso \
  -net nic,model=virtio \
  -net user,hostfwd=tcp::2222-:22 \
  -nographic

# Conectar por SSH (desde otra terminal)
ssh -p 2222 gentoo@localhost
Si no tenés genisoimage: pacman -S cdrtools">
</head>
<body><nav class="navbar is-transparent " role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a class="navbar-item" href="https://imlauera.github.io/">
      <figure class="image">
        <img alt="" class="is-rounded" src="/img/memememe.jpg">
      </figure>
    </a>
    <a class="navbar-item" href="https://imlauera.github.io/">
      Imlauer
    </a>
    <a class="navbar-item" href="/acerca/">
      Acerca de Mi
    </a>
  </div>
  
  
</nav>

  <section>
    <section class='hero is-small is-link is-fullwidth'>
      <div class="hero-body">
<div class="container">
  <h1 class="title">
    Gentoo VM desde la TTY.
  </h1>
  <h2 class="subtitle">
    <time datetime='2025-12-30T12:00:30-03:00'>
      December 30, 2025
    </time>
    
    <br>
    
    
    
    <a class="tag is-info" href="https://imlauera.github.io/tags/vm/">Vm</a>
    
    
    
  </h2>
</div>

      </div>
    </section>
    <section class="section">
      <div class="container">
<div class="content is-medium">
  <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Decime como bootearlo dame los comandos no me tires un texto tan largo. <span style="color:#f92672">[</span>I<span style="color:#f92672">]</span> esotericwarfare@arch ~&gt; wget https://mimas.co.ext.planetunix.net/pub/gentoo/releases/amd64/autobuilds/current-di-amd64-cloudinit/di-amd64-cloudinit-20251228T163057Z.qcow2
</span></span><span style="display:flex;"><span>--2025-12-30 11:54:22--  https://mimas.co.ext.planetunix.net/pub/gentoo/releases/amd64/autobuilds/current-di-amd64-cloudinit/di-amd64-cloudinit-20251228T163057Z.qcow2
</span></span><span style="display:flex;"><span>Loaded CA certificate <span style="color:#e6db74">&#39;/etc/ssl/certs/ca-certificates.crt&#39;</span>
</span></span><span style="display:flex;"><span>Resolving mimas.co.ext.planetunix.net <span style="color:#f92672">(</span>mimas.co.ext.planetunix.net<span style="color:#f92672">)</span>... 38.180.182.84, 2a02:c6c1:151:202:0:1:0:10
</span></span><span style="display:flex;"><span>Connecting to mimas.co.ext.planetunix.net <span style="color:#f92672">(</span>mimas.co.ext.planetunix.net<span style="color:#f92672">)</span>|38.180.182.84|:443... connected.
</span></span><span style="display:flex;"><span>HTTP request sent, awaiting response... <span style="color:#ae81ff">200</span> OK
</span></span><span style="display:flex;"><span>Length: <span style="color:#ae81ff">1398931456</span> <span style="color:#f92672">(</span>1.3G<span style="color:#f92672">)</span> <span style="color:#f92672">[</span>text/plain<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>Saving to: ‘di-amd64-cloudinit-20251228T163057Z.qcow2’
</span></span><span style="display:flex;"><span>di-amd64-cloudinit-20251228T163057Z.qcow2       100%<span style="color:#f92672">[======================================================================================================</span>&gt;<span style="color:#f92672">]</span>   1.30G  4.88MB/s    in 3m 1s   
</span></span><span style="display:flex;"><span>Last-modified header invalid -- time-stamp ignored.
</span></span><span style="display:flex;"><span>2025-12-30 11:57:24 <span style="color:#f92672">(</span>7.37 MB/s<span style="color:#f92672">)</span> - ‘di-amd64-cloudinit-20251228T163057Z.qcow2’ saved <span style="color:#f92672">[</span>1398931456/1398931456<span style="color:#f92672">]</span>
</span></span></code></pre></div><hr>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Crear cloud-init ISO</span>
</span></span><span style="display:flex;"><span>cat &gt; user-data <span style="color:#e6db74">&lt;&lt; EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">#cloud-config
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">users:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: gentoo
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    sudo: ALL=(ALL) NOPASSWD:ALL
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ssh_authorized_keys:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - $(cat ~/.ssh/id_rsa.pub)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">chpasswd:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  list: |
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    gentoo:gentoo
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  expire: false
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ssh_pwauth: true
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;instance-id: vm1&#34;</span> &gt; meta-data
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>genisoimage -output cloud-init.iso -volid cidata -joliet -rock user-data meta-data
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Bootear la VM</span>
</span></span><span style="display:flex;"><span>qemu-system-x86_64 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -enable-kvm <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -m <span style="color:#ae81ff">2048</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -cpu host <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -smp <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -drive file<span style="color:#f92672">=</span>di-amd64-cloudinit-20251228T163057Z.qcow2,format<span style="color:#f92672">=</span>qcow2,if<span style="color:#f92672">=</span>virtio <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -cdrom cloud-init.iso <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -net nic,model<span style="color:#f92672">=</span>virtio <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -net user,hostfwd<span style="color:#f92672">=</span>tcp::2222-:22 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -nographic
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Conectar por SSH (desde otra terminal)</span>
</span></span><span style="display:flex;"><span>ssh -p <span style="color:#ae81ff">2222</span> gentoo@localhost
</span></span></code></pre></div><p>Si no tenés <code>genisoimage</code>: <code>pacman -S cdrtools</code></p>
<p>Agregá <code>-serial mon:stdio</code> para ver la consola:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>qemu-system-x86_64 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -enable-kvm <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -m <span style="color:#ae81ff">2048</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -cpu host <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -smp <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -drive file<span style="color:#f92672">=</span>di-amd64-cloudinit-20251228T163057Z.qcow2,format<span style="color:#f92672">=</span>qcow2,if<span style="color:#f92672">=</span>virtio <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -cdrom cloud-init.iso <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -net nic,model<span style="color:#f92672">=</span>virtio <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -net user,hostfwd<span style="color:#f92672">=</span>tcp::2222-:22 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -nographic <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -serial mon:stdio
</span></span></code></pre></div><p>O usá virsh que funciona mejor con consola:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Instalá libvirt si no lo tenés</span>
</span></span><span style="display:flex;"><span>sudo pacman -S libvirt qemu-base
</span></span><span style="display:flex;"><span>sudo systemctl start libvirtd
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Copiá archivos al directorio de libvirt</span>
</span></span><span style="display:flex;"><span>sudo cp di-amd64-cloudinit-20251228T163057Z.qcow2 /var/lib/libvirt/images/gentoo.qcow2
</span></span><span style="display:flex;"><span>sudo cp cloud-init.iso /var/lib/libvirt/images/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Creá la VM</span>
</span></span><span style="display:flex;"><span>virt-install <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --name gentoo <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --memory <span style="color:#ae81ff">2048</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --vcpus <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --disk /var/lib/libvirt/images/gentoo.qcow2,format<span style="color:#f92672">=</span>qcow2 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --disk /var/lib/libvirt/images/cloud-init.iso,device<span style="color:#f92672">=</span>cdrom <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --import <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --os-variant gentoo <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --network network<span style="color:#f92672">=</span>default <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --console pty,target_type<span style="color:#f92672">=</span>serial
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Después conectate</span>
</span></span><span style="display:flex;"><span>virsh console gentoo
</span></span></code></pre></div><hr>
<p>Activá la red default:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo virsh net-start default
</span></span><span style="display:flex;"><span>sudo virsh net-autostart default
</span></span></code></pre></div><p>Después volvé a ejecutar el virt-install:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo virt-install <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --name gentoo <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --memory <span style="color:#ae81ff">2048</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --vcpus <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --disk /var/lib/libvirt/images/gentoo.qcow2,format<span style="color:#f92672">=</span>qcow2 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --disk /var/lib/libvirt/images/cloud-init.iso,device<span style="color:#f92672">=</span>cdrom <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --import <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --os-variant gentoo <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --network network<span style="color:#f92672">=</span>default <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --console pty,target_type<span style="color:#f92672">=</span>serial
</span></span></code></pre></div><p>La VM no está obteniendo IP. Reiniciala y esperá un poco más:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo virsh destroy gentoo
</span></span><span style="display:flex;"><span>sudo virsh start gentoo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Esperá 2-3 minutos</span>
</span></span><span style="display:flex;"><span>sleep <span style="color:#ae81ff">120</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo virsh domifaddr gentoo
</span></span></code></pre></div><p>O conectate directo sin red usando consola serial. Primero verificá que el disco tenga el kernel correcto:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo virsh destroy gentoo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Recreá la VM con consola serial configurada correctamente</span>
</span></span><span style="display:flex;"><span>sudo virt-install <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --name gentoo2 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --memory <span style="color:#ae81ff">2048</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --vcpus <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --disk /var/lib/libvirt/images/gentoo.qcow2,format<span style="color:#f92672">=</span>qcow2 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --disk /var/lib/libvirt/images/cloud-init.iso,device<span style="color:#f92672">=</span>cdrom <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --import <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --os-variant gentoo <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --network network<span style="color:#f92672">=</span>default <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --graphics none <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  --console pty,target.type<span style="color:#f92672">=</span>serial
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Deberías ver el boot ahora</span>
</span></span></code></pre></div><p>O usá QEMU directo que es más confiable:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo qemu-system-x86_64 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -enable-kvm <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -m <span style="color:#ae81ff">2048</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -cpu host <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -smp <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -drive file<span style="color:#f92672">=</span>/var/lib/libvirt/images/gentoo.qcow2,format<span style="color:#f92672">=</span>qcow2 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -cdrom /var/lib/libvirt/images/cloud-init.iso <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -netdev user,id<span style="color:#f92672">=</span>net0,hostfwd<span style="color:#f92672">=</span>tcp::2222-:22 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -device e1000,netdev<span style="color:#f92672">=</span>net0 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -nographic
</span></span></code></pre></div><p>Perdon. Probá esto:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo qemu-system-x86_64 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -enable-kvm <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -m <span style="color:#ae81ff">2048</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -cpu host <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -smp <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -drive file<span style="color:#f92672">=</span>/var/lib/libvirt/images/gentoo.qcow2,format<span style="color:#f92672">=</span>qcow2 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -cdrom /var/lib/libvirt/images/cloud-init.iso <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -netdev user,id<span style="color:#f92672">=</span>net0,hostfwd<span style="color:#f92672">=</span>tcp::2222-:22 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -device e1000,netdev<span style="color:#f92672">=</span>net0 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -nographic
</span></span></code></pre></div><p>Esperá 2-3 minutos y en otra terminal:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ssh -p <span style="color:#ae81ff">2222</span> gentoo@localhost
</span></span></code></pre></div><p>Password: <code>gentoo</code></p>
<p>Si no funciona, la imagen de Gentoo puede tener problemas. Probá con Ubuntu que sé que funciona:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd /var/lib/libvirt/images
</span></span><span style="display:flex;"><span>sudo wget https://cloud-images.ubuntu.com/minimal/releases/jammy/release/ubuntu-22.04-minimal-cloudimg-amd64.img
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo qemu-system-x86_64 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -enable-kvm <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -m <span style="color:#ae81ff">2048</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -cpu host <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -smp <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -drive file<span style="color:#f92672">=</span>ubuntu-22.04-minimal-cloudimg-amd64.img,format<span style="color:#f92672">=</span>qcow2 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -cdrom cloud-init.iso <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -netdev user,id<span style="color:#f92672">=</span>net0,hostfwd<span style="color:#f92672">=</span>tcp::2222-:22 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -device e1000,netdev<span style="color:#f92672">=</span>net0 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -nographic
</span></span></code></pre></div><p>Esperá y probá SSH.</p>

</div>


      </div>
    </section>
  </section><script 
src="/quiz/quizdown.js">
</script>
<script 
src="/quiz/quizdownKatex.js">
</script>
<script 
src="/quiz/quizdownHighlight.js">
</script>
<script>quizdown.register(quizdownHighlight).register(quizdownKatex).init()</script> 
<footer class="footer">
  <div class="content has-text-centered">
    
    
    <p>
      
      <a class="" href="https://imlauera.github.io/index.xml" target="_blank">
        <span>
          RSS
        </span>
      </a>
      
      | <a href="https://imlauera.github.io" target="_blank">Andres Imlauer.</a> 

      
      
    </p>
    
  </div>




<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({ tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]} })
</script>
</footer>


</body>
</html>
