<!DOCTYPE html>
<html lang="es">





<head>
  <meta property="og:url" content="https://imlauera.github.io/viral_shorts_ffmpeg/">
  <meta property="og:site_name" content="Imlauer">
  <meta property="og:title" content="Instagram Shorts with FFMpeg">
  <meta property="og:description" content="Claude I‚Äôll help you create a tool to detect potential viral moments from Twitch VODs and create Instagram reels with burned-in subtitles using FFmpeg!
Here‚Äôs a comprehensive approach:
Strategy for Detecting Viral Moments Since FFmpeg alone can‚Äôt ‚Äúdetect‚Äù viral content (it needs AI/ML for that), I‚Äôll show you how to:
Use FFmpeg‚Äôs scene detection to find interesting transitions/moments Detect audio peaks (loud reactions, excitement) Extract segments and add burned-in subtitles Format for Instagram Reels (9:16 aspect ratio, 15-90 seconds) Step-by-Step FFmpeg Commands 1. Detect Scene Changes &amp; Audio Peaks # Detect scenes with significant changes ffmpeg -i input.mp4 -filter_complex \ &#34;[0:v]select=&#39;gt(scene,0.4)&#39;,metadata=print:file=scenes.txt[out]&#34; \ -map &#34;[out]&#34; -f null - # Detect audio peaks (loud moments) ffmpeg -i input.mp4 -af &#34;volumedetect&#34; -f null - 2&gt;&amp;1 | grep &#34;max_volume&#34; 2. Extract Specific Segment (e.g., 30 seconds starting at 5:23) ffmpeg -ss 00:05:23 -i input.mp4 -t 30 -c copy segment.mp4 3. Generate Subtitles (You‚Äôll need a subtitle file first) For auto-subtitles, you‚Äôd need to use Whisper or similar tool first:">
  <meta property="og:locale" content="es_es">
  <meta property="og:type" content="article">
    <meta property="article:published_time" content="2025-12-20T02:03:13-03:00">
    <meta property="article:modified_time" content="2025-12-20T02:03:13-03:00">

  
  <meta itemprop="name" content="Instagram Shorts with FFMpeg">
  <meta itemprop="description" content="Claude I‚Äôll help you create a tool to detect potential viral moments from Twitch VODs and create Instagram reels with burned-in subtitles using FFmpeg!
Here‚Äôs a comprehensive approach:
Strategy for Detecting Viral Moments Since FFmpeg alone can‚Äôt ‚Äúdetect‚Äù viral content (it needs AI/ML for that), I‚Äôll show you how to:
Use FFmpeg‚Äôs scene detection to find interesting transitions/moments Detect audio peaks (loud reactions, excitement) Extract segments and add burned-in subtitles Format for Instagram Reels (9:16 aspect ratio, 15-90 seconds) Step-by-Step FFmpeg Commands 1. Detect Scene Changes &amp; Audio Peaks # Detect scenes with significant changes ffmpeg -i input.mp4 -filter_complex \ &#34;[0:v]select=&#39;gt(scene,0.4)&#39;,metadata=print:file=scenes.txt[out]&#34; \ -map &#34;[out]&#34; -f null - # Detect audio peaks (loud moments) ffmpeg -i input.mp4 -af &#34;volumedetect&#34; -f null - 2&gt;&amp;1 | grep &#34;max_volume&#34; 2. Extract Specific Segment (e.g., 30 seconds starting at 5:23) ffmpeg -ss 00:05:23 -i input.mp4 -t 30 -c copy segment.mp4 3. Generate Subtitles (You‚Äôll need a subtitle file first) For auto-subtitles, you‚Äôd need to use Whisper or similar tool first:">
  <meta itemprop="datePublished" content="2025-12-20T02:03:13-03:00">
  <meta itemprop="dateModified" content="2025-12-20T02:03:13-03:00">
  <meta itemprop="wordCount" content="931">
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Instagram Shorts with FFMpeg">
  <meta name="twitter:description" content="Claude I‚Äôll help you create a tool to detect potential viral moments from Twitch VODs and create Instagram reels with burned-in subtitles using FFmpeg!
Here‚Äôs a comprehensive approach:
Strategy for Detecting Viral Moments Since FFmpeg alone can‚Äôt ‚Äúdetect‚Äù viral content (it needs AI/ML for that), I‚Äôll show you how to:
Use FFmpeg‚Äôs scene detection to find interesting transitions/moments Detect audio peaks (loud reactions, excitement) Extract segments and add burned-in subtitles Format for Instagram Reels (9:16 aspect ratio, 15-90 seconds) Step-by-Step FFmpeg Commands 1. Detect Scene Changes &amp; Audio Peaks # Detect scenes with significant changes ffmpeg -i input.mp4 -filter_complex \ &#34;[0:v]select=&#39;gt(scene,0.4)&#39;,metadata=print:file=scenes.txt[out]&#34; \ -map &#34;[out]&#34; -f null - # Detect audio peaks (loud moments) ffmpeg -i input.mp4 -af &#34;volumedetect&#34; -f null - 2&gt;&amp;1 | grep &#34;max_volume&#34; 2. Extract Specific Segment (e.g., 30 seconds starting at 5:23) ffmpeg -ss 00:05:23 -i input.mp4 -t 30 -c copy segment.mp4 3. Generate Subtitles (You‚Äôll need a subtitle file first) For auto-subtitles, you‚Äôd need to use Whisper or similar tool first:">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>
    
    Instagram Shorts with FFMpeg
    
  </title>
  <link rel="stylesheet" href='https://imlauera.github.io/css/site.min.css'>
  <link rel="canonical" href="https://imlauera.github.io/viral_shorts_ffmpeg/">
  <link rel="alternate" type="application/rss&#43;xml" href="https://imlauera.github.io/index.xml" title="Imlauer">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer">
  <meta name="author" content="Imlauer.">
  <meta name="description" content="Claude
I&rsquo;ll help you create a tool to detect potential viral moments from Twitch VODs and create Instagram reels with burned-in subtitles using FFmpeg!
Here&rsquo;s a comprehensive approach:
Strategy for Detecting Viral Moments
Since FFmpeg alone can&rsquo;t &ldquo;detect&rdquo; viral content (it needs AI/ML for that), I&rsquo;ll show you how to:

Use FFmpeg&rsquo;s scene detection to find interesting transitions/moments
Detect audio peaks (loud reactions, excitement)
Extract segments and add burned-in subtitles
Format for Instagram Reels (9:16 aspect ratio, 15-90 seconds)

Step-by-Step FFmpeg Commands
1. Detect Scene Changes &amp; Audio Peaks
# Detect scenes with significant changes
ffmpeg -i input.mp4 -filter_complex \
&#34;[0:v]select=&#39;gt(scene,0.4)&#39;,metadata=print:file=scenes.txt[out]&#34; \
-map &#34;[out]&#34; -f null -

# Detect audio peaks (loud moments)
ffmpeg -i input.mp4 -af &#34;volumedetect&#34; -f null - 2&gt;&amp;1 | grep &#34;max_volume&#34;
2. Extract Specific Segment (e.g., 30 seconds starting at 5:23)
ffmpeg -ss 00:05:23 -i input.mp4 -t 30 -c copy segment.mp4
3. Generate Subtitles (You&rsquo;ll need a subtitle file first)
For auto-subtitles, you&rsquo;d need to use Whisper or similar tool first:">
</head>
<body><nav class="navbar is-transparent " role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a class="navbar-item" href="https://imlauera.github.io/">
      <figure class="image">
        <img alt="" class="is-rounded" src="/img/memememe.jpg">
      </figure>
    </a>
    <a class="navbar-item" href="https://imlauera.github.io/">
      Imlauer
    </a>
    <a class="navbar-item" href="/acerca/">
      Acerca de Mi
    </a>
  </div>
  
  
</nav>

  <section>
    <section class='hero is-small is-link is-fullwidth'>
      <div class="hero-body">
<div class="container">
  <h1 class="title">
    Instagram Shorts with FFMpeg
  </h1>
  <h2 class="subtitle">
    <time datetime='2025-12-20T02:03:13-03:00'>
      December 20, 2025
    </time>
    
  </h2>
</div>

      </div>
    </section>
    <section class="section">
      <div class="container">
<div class="content is-medium">
  <h1 id="claude">Claude</h1>
<p>I&rsquo;ll help you create a tool to detect potential viral moments from Twitch VODs and create Instagram reels with burned-in subtitles using FFmpeg!</p>
<p>Here&rsquo;s a comprehensive approach:</p>
<h2 id="strategy-for-detecting-viral-moments">Strategy for Detecting Viral Moments</h2>
<p>Since FFmpeg alone can&rsquo;t &ldquo;detect&rdquo; viral content (it needs AI/ML for that), I&rsquo;ll show you how to:</p>
<ol>
<li><strong>Use FFmpeg&rsquo;s scene detection</strong> to find interesting transitions/moments</li>
<li><strong>Detect audio peaks</strong> (loud reactions, excitement)</li>
<li><strong>Extract segments</strong> and add burned-in subtitles</li>
<li><strong>Format for Instagram Reels</strong> (9:16 aspect ratio, 15-90 seconds)</li>
</ol>
<h2 id="step-by-step-ffmpeg-commands">Step-by-Step FFmpeg Commands</h2>
<h3 id="1-detect-scene-changes--audio-peaks">1. Detect Scene Changes &amp; Audio Peaks</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Detect scenes with significant changes</span>
</span></span><span style="display:flex;"><span>ffmpeg -i input.mp4 -filter_complex <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;[0:v]select=&#39;gt(scene,0.4)&#39;,metadata=print:file=scenes.txt[out]&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>-map <span style="color:#e6db74">&#34;[out]&#34;</span> -f null -
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Detect audio peaks (loud moments)</span>
</span></span><span style="display:flex;"><span>ffmpeg -i input.mp4 -af <span style="color:#e6db74">&#34;volumedetect&#34;</span> -f null - 2&gt;&amp;<span style="color:#ae81ff">1</span> | grep <span style="color:#e6db74">&#34;max_volume&#34;</span>
</span></span></code></pre></div><h3 id="2-extract-specific-segment-eg-30-seconds-starting-at-523">2. Extract Specific Segment (e.g., 30 seconds starting at 5:23)</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ffmpeg -ss 00:05:23 -i input.mp4 -t <span style="color:#ae81ff">30</span> -c copy segment.mp4
</span></span></code></pre></div><h3 id="3-generate-subtitles-youll-need-a-subtitle-file-first">3. Generate Subtitles (You&rsquo;ll need a subtitle file first)</h3>
<p>For auto-subtitles, you&rsquo;d need to use Whisper or similar tool first:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># If you have whisper installed</span>
</span></span><span style="display:flex;"><span>whisper segment.mp4 --model base --output_format srt
</span></span></code></pre></div><h3 id="4-crop-to-916-instagram-reel-format--burn-subtitles">4. Crop to 9:16 (Instagram Reel format) + Burn Subtitles</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ffmpeg -i segment.mp4 -vf <span style="color:#e6db74">&#34;crop=ih*9/16:ih,scale=1080:1920,subtitles=segment.srt:force_style=&#39;Alignment=10,FontSize=24,MarginV=100,Bold=1,OutlineColour=&amp;H000000&amp;,Outline=2&#39;&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>-c:v libx264 -preset medium -crf <span style="color:#ae81ff">23</span> -c:a aac -b:a 128k reel_output.mp4
</span></span></code></pre></div><h3 id="5-all-in-one-command-with-timestamp">5. All-in-One Command (with timestamp)</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ffmpeg -ss 00:05:23 -i input.mp4 -t <span style="color:#ae81ff">30</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>-vf <span style="color:#e6db74">&#34;crop=ih*9/16:ih,scale=1080:1920,subtitles=segment.srt:force_style=&#39;Alignment=10,FontSize=28,MarginV=120,Bold=1,PrimaryColour=&amp;HFFFFFF&amp;,OutlineColour=&amp;H000000&amp;,Outline=3,Shadow=2&#39;&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>-c:v libx264 -preset medium -crf <span style="color:#ae81ff">23</span> -pix_fmt yuv420p <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>-c:a aac -b:a 128k -ar <span style="color:#ae81ff">48000</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>-movflags +faststart <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>reel_final.mp4
</span></span></code></pre></div><h2 id="advanced-automated-viral-moment-detection-script">Advanced: Automated Viral Moment Detection Script</h2>
<p>Let me create a bash script that combines these techniques:## Key Features Explained</p>
<p><strong>Subtitle Styling Options:</strong></p>
<ul>
<li><code>Alignment=10</code> - Bottom center (2=bottom, 10=top center)</li>
<li><code>FontSize=32</code> - Adjust based on preference</li>
<li><code>Bold=1</code> - Bold text for readability</li>
<li><code>OutlineColour=&amp;H000000&amp;</code> - Black outline (hex in BGR format)</li>
<li><code>Outline=4</code> - Thick outline for contrast</li>
<li><code>MarginV=150</code> - Distance from bottom (pixels)</li>
</ul>
<p><strong>Finding Viral Moments (Manual Analysis):</strong></p>
<ol>
<li><strong>Watch for chat reactions</strong> in VOD</li>
<li><strong>Look at view count spikes</strong> on Twitch stats</li>
<li><strong>Use audio analysis</strong> - sudden volume increases often indicate exciting moments</li>
<li><strong>Scene detection</strong> - rapid scene changes can indicate action</li>
</ol>
<p><strong>Better Automation Options:</strong></p>
<ul>
<li>Use <strong>Whisper AI</strong> for auto-transcription</li>
<li>Use <strong>FFmpeg&rsquo;s <code>silencedetect</code></strong> to find reaction gaps</li>
<li>Parse <strong>Twitch chat replay</strong> for emote spikes (requires external tool)</li>
<li>Use <strong>ML models</strong> like PySceneDetect for better scene analysis</li>
</ul>
<p><strong>Instagram Reel Requirements:</strong></p>
<ul>
<li>‚úÖ 9:16 aspect ratio (1080x1920)</li>
<li>‚úÖ 15-90 seconds duration</li>
<li>‚úÖ H.264 codec</li>
<li>‚úÖ AAC audio</li>
<li>‚úÖ faststart flag for quick loading</li>
</ul>
<p>Would you like me to create a more advanced version with Python that includes actual ML-based viral moment detection, or help you set up Whisper for automatic subtitle generation?</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Twitch VOD to Instagram Reel with Viral Moment Detection</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Usage: ./vod_to_reel.sh input.mp4 [start_time] [duration]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>INPUT<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>START_TIME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>2<span style="color:#66d9ef">:-</span>00:00:00<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>DURATION<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>3<span style="color:#66d9ef">:-</span>30<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -z <span style="color:#e6db74">&#34;</span>$INPUT<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;Usage: </span>$0<span style="color:#e6db74"> input.mp4 [start_time] [duration]&#34;</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;Example: </span>$0<span style="color:#e6db74"> stream.mp4 00:15:30 45&#34;</span>
</span></span><span style="display:flex;"><span>    exit <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Output filename</span>
</span></span><span style="display:flex;"><span>OUTPUT<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;reel_</span><span style="color:#66d9ef">$(</span>date +%Y%m%d_%H%M%S<span style="color:#66d9ef">)</span><span style="color:#e6db74">.mp4&#34;</span>
</span></span><span style="display:flex;"><span>TEMP_SEGMENT<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;temp_segment.mp4&#34;</span>
</span></span><span style="display:flex;"><span>SRT_FILE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;temp_segment.srt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;üé¨ Processing Twitch VOD to Instagram Reel...&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Step 1: Detect loud moments (potential viral content)</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;üìä Analyzing audio for peak moments...&#34;</span>
</span></span><span style="display:flex;"><span>ffmpeg -i <span style="color:#e6db74">&#34;</span>$INPUT<span style="color:#e6db74">&#34;</span> -af <span style="color:#e6db74">&#34;volumedetect,silencedetect=noise=-30dB:d=0.5&#34;</span> -f null - 2&gt;&amp;<span style="color:#ae81ff">1</span> | tee audio_analysis.log
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Step 2: Extract segment</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;‚úÇÔ∏è  Extracting segment from </span>$START_TIME<span style="color:#e6db74"> (</span><span style="color:#e6db74">${</span>DURATION<span style="color:#e6db74">}</span><span style="color:#e6db74">s)...&#34;</span>
</span></span><span style="display:flex;"><span>ffmpeg -ss <span style="color:#e6db74">&#34;</span>$START_TIME<span style="color:#e6db74">&#34;</span> -i <span style="color:#e6db74">&#34;</span>$INPUT<span style="color:#e6db74">&#34;</span> -t <span style="color:#e6db74">&#34;</span>$DURATION<span style="color:#e6db74">&#34;</span> -c copy <span style="color:#e6db74">&#34;</span>$TEMP_SEGMENT<span style="color:#e6db74">&#34;</span> -y
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Step 3: Generate subtitles (requires whisper)</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;üìù Generating subtitles...&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> command -v whisper &amp;&gt; /dev/null; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>    whisper <span style="color:#e6db74">&#34;</span>$TEMP_SEGMENT<span style="color:#e6db74">&#34;</span> --model base --output_format srt --output_dir . 2&gt;/dev/null
</span></span><span style="display:flex;"><span>    mv temp_segment.srt <span style="color:#e6db74">&#34;</span>$SRT_FILE<span style="color:#e6db74">&#34;</span> 2&gt;/dev/null <span style="color:#f92672">||</span> echo <span style="color:#e6db74">&#34;‚ö†Ô∏è  No subtitle file generated&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;‚ö†Ô∏è  Whisper not installed. Skipping subtitle generation.&#34;</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;   Install: pip install openai-whisper&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Step 4: Convert to 9:16 format with subtitles</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;üé® Converting to Instagram Reel format (9:16)...&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -f <span style="color:#e6db74">&#34;</span>$SRT_FILE<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># With subtitles</span>
</span></span><span style="display:flex;"><span>    ffmpeg -i <span style="color:#e6db74">&#34;</span>$TEMP_SEGMENT<span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>        -vf <span style="color:#e6db74">&#34;crop=ih*9/16:ih,scale=1080:1920,subtitles=&#39;</span>$SRT_FILE<span style="color:#e6db74">&#39;:force_style=&#39;Alignment=10,FontName=Arial,FontSize=32,Bold=1,PrimaryColour=&amp;HFFFFFF&amp;,OutlineColour=&amp;H000000&amp;,Outline=4,Shadow=2,MarginV=150&#39;&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>        -c:v libx264 -preset medium -crf <span style="color:#ae81ff">23</span> -pix_fmt yuv420p <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>        -c:a aac -b:a 128k -ar <span style="color:#ae81ff">48000</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>        -movflags +faststart <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;</span>$OUTPUT<span style="color:#e6db74">&#34;</span> -y
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Without subtitles</span>
</span></span><span style="display:flex;"><span>    ffmpeg -i <span style="color:#e6db74">&#34;</span>$TEMP_SEGMENT<span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>        -vf <span style="color:#e6db74">&#34;crop=ih*9/16:ih,scale=1080:1920&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>        -c:v libx264 -preset medium -crf <span style="color:#ae81ff">23</span> -pix_fmt yuv420p <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>        -c:a aac -b:a 128k -ar <span style="color:#ae81ff">48000</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>        -movflags +faststart <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;</span>$OUTPUT<span style="color:#e6db74">&#34;</span> -y
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Cleanup</span>
</span></span><span style="display:flex;"><span>rm -f <span style="color:#e6db74">&#34;</span>$TEMP_SEGMENT<span style="color:#e6db74">&#34;</span> <span style="color:#e6db74">&#34;</span>$SRT_FILE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;‚úÖ Done! Output: </span>$OUTPUT<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;üì± Instagram Reel specs:&#34;</span>
</span></span><span style="display:flex;"><span>ffprobe -v quiet -print_format json -show_format -show_streams <span style="color:#e6db74">&#34;</span>$OUTPUT<span style="color:#e6db74">&#34;</span> | grep -E <span style="color:#e6db74">&#34;(width|height|duration|codec_name)&#34;</span> | head -6
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Optional: Show scene detection results</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;üí° To find viral moments automatically, analyze the audio_analysis.log file&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;   Look for: high volume peaks, silence breaks (reactions), or use the timestamps&#34;</span>
</span></span></code></pre></div><hr>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>The error you<span style="color:#e6db74">&#39;re seeing is because **WebM format only supports VP8, VP9, or AV1 video codecs** (and Vorbis/Opus for audio), but you&#39;</span>re trying to encode with **libx264 <span style="color:#f92672">(</span>H.264<span style="color:#f92672">)</span>** which is not compatible with WebM containers.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## Solution: Change the output format or codec</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>**Option 1: Change to MP4 <span style="color:#f92672">(</span>recommended <span style="color:#66d9ef">for</span> H.264<span style="color:#f92672">)</span>**
</span></span><span style="display:flex;"><span><span style="color:#e6db74">```</span>bash
</span></span><span style="display:flex;"><span>ffmpeg -ss 00:05:23 -i <span style="color:#e6db74">&#34;winning.webm&#34;</span> -t <span style="color:#ae81ff">30</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -vf <span style="color:#e6db74">&#34;crop=ih*9/16:ih,scale=1080:1920,subtitles=sub.srt:force_style=&#39;Alignment=10,FontSize=28,MarginV=120,Bold=1,PrimaryColour=&amp;HFFFFFF&amp;,OutlineColour=&amp;H000000&amp;,Outline=3,Shadow=2&#39;&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -c:v libx264 -preset medium -crf <span style="color:#ae81ff">23</span> -pix_fmt yuv420p <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -c:a aac -b:a 128k -ar <span style="color:#ae81ff">48000</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -movflags +faststart reel_final.mp4
</span></span></code></pre></div><p><strong>Option 2: Keep WebM format with VP9 codec</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ffmpeg -ss 00:05:23 -i <span style="color:#e6db74">&#34;winning.webm&#34;</span> -t <span style="color:#ae81ff">30</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -vf <span style="color:#e6db74">&#34;crop=ih*9/16:ih,scale=1080:1920,subtitles=sub.srt:force_style=&#39;Alignment=10,FontSize=28,MarginV=120,Bold=1,PrimaryColour=&amp;HFFFFFF&amp;,OutlineColour=&amp;H000000&amp;,Outline=3,Shadow=2&#39;&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -c:v libvpx-vp9 -b:v 2M -crf <span style="color:#ae81ff">30</span> -pix_fmt yuv420p <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -c:a libopus -b:a 128k -ar <span style="color:#ae81ff">48000</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  reel_final.webm
</span></span></code></pre></div><p><strong>Key changes for WebM:</strong></p>
<ul>
<li>Video codec: <code>libvpx-vp9</code> instead of <code>libx264</code></li>
<li>Audio codec: <code>libopus</code> instead of <code>aac</code></li>
<li>Use <code>-b:v 2M</code> and <code>-crf 30</code> for VP9 quality control</li>
</ul>
<p>For social media reels (Instagram/TikTok), <strong>MP4 with H.264 is usually the better choice</strong> as it has wider compatibility.</p>
<pre tabindex="0"><code>
---

```bash
ffmpeg -ss 00:05:23 -i &#34;fiUMZTFIp3s.mp4&#34; -t 30 -vf &#34;crop=ih*9/16:ih,scale=1080:1920,subtitles=sub.srt:force_style=&#39;Alignment=10,FontSize=28,MarginV=120,Bold=1,PrimaryColour=&amp;HFFFFFF&amp;,OutlineColour=&amp;H000000&amp;,Outline=3,Shadow=2&#39;&#34; -c:v libx264 -preset medium -crf 23 -pix_fmt yuv420p -c:a aac -b:a 128k -ar
48000 -movflags +faststart reel_final.mp4
</code></pre>
</div>


      </div>
    </section>
  </section><script 
src="/quiz/quizdown.js">
</script>
<script 
src="/quiz/quizdownKatex.js">
</script>
<script 
src="/quiz/quizdownHighlight.js">
</script>
<script>quizdown.register(quizdownHighlight).register(quizdownKatex).init()</script> 
<footer class="footer">
  <div class="content has-text-centered">
    
    
    <p>
      
      <a class="" href="https://imlauera.github.io/index.xml" target="_blank">
        <span>
          RSS
        </span>
      </a>
      
      | <a href="https://imlauera.github.io" target="_blank">Andres Imlauer.</a> 

      
      
    </p>
    
  </div>




<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({ tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]} })
</script>
</footer>


</body>
</html>
