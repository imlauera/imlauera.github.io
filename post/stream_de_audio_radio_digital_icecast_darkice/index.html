<!DOCTYPE html>
<html lang="es">





<head>
  <meta property="og:url" content="https://imlauera.github.io/post/stream_de_audio_radio_digital_icecast_darkice/">
  <meta property="og:site_name" content="Imlauer">
  <meta property="og:title" content="Crear Stream de audio, radio digital usando icecast darkice">
  <meta property="og:description" content="No necesitan usar SoundWire ni pagar la version premium
Instalar icecast y darkice Resumidamente IceCast crea el servidor y darkice transmite el audio a ese servidor. En este caso veremos como podemos transmitir el audio interno de tu computadora a la red LAN (se puede hacer a traves de internet tambien)
Primero, se instalará un servidor de streaming.
Instalar icecast2 (sudo apt install icecast2). Editar el fichero /etc/icecast2/icecast.xml para escuchar en todas las IP del PC, descomentando y poniendo:">
  <meta property="og:locale" content="es_es">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2023-04-30T17:12:55-03:00">
    <meta property="article:modified_time" content="2023-04-30T17:12:55-03:00">
    <meta property="article:tag" content="Radio">
    <meta property="article:tag" content="Digital">
    <meta property="article:tag" content="Stream">
    <meta property="article:tag" content="Audio">

  
  <meta itemprop="name" content="Crear Stream de audio, radio digital usando icecast darkice">
  <meta itemprop="description" content="No necesitan usar SoundWire ni pagar la version premium
Instalar icecast y darkice Resumidamente IceCast crea el servidor y darkice transmite el audio a ese servidor. En este caso veremos como podemos transmitir el audio interno de tu computadora a la red LAN (se puede hacer a traves de internet tambien)
Primero, se instalará un servidor de streaming.
Instalar icecast2 (sudo apt install icecast2). Editar el fichero /etc/icecast2/icecast.xml para escuchar en todas las IP del PC, descomentando y poniendo:">
  <meta itemprop="datePublished" content="2023-04-30T17:12:55-03:00">
  <meta itemprop="dateModified" content="2023-04-30T17:12:55-03:00">
  <meta itemprop="wordCount" content="488">
  <meta itemprop="keywords" content="Radio,Digital,Stream,Audio">
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Crear Stream de audio, radio digital usando icecast darkice">
  <meta name="twitter:description" content="No necesitan usar SoundWire ni pagar la version premium
Instalar icecast y darkice Resumidamente IceCast crea el servidor y darkice transmite el audio a ese servidor. En este caso veremos como podemos transmitir el audio interno de tu computadora a la red LAN (se puede hacer a traves de internet tambien)
Primero, se instalará un servidor de streaming.
Instalar icecast2 (sudo apt install icecast2). Editar el fichero /etc/icecast2/icecast.xml para escuchar en todas las IP del PC, descomentando y poniendo:">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>
    
    Crear Stream de audio, radio digital usando icecast darkice
    
  </title>
  <link rel="stylesheet" href='https://imlauera.github.io/css/site.min.css'>
  <link rel="canonical" href="https://imlauera.github.io/post/stream_de_audio_radio_digital_icecast_darkice/">
  <link rel="alternate" type="application/rss&#43;xml" href="https://imlauera.github.io/index.xml" title="Imlauer">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer">
  <meta name="author" content="Imlauer.">
  <meta name="description" content="No necesitan usar SoundWire ni pagar la version premium
Instalar icecast y darkice
Resumidamente IceCast crea el servidor y darkice transmite el audio a ese servidor.
En este caso veremos como podemos transmitir el audio interno de tu computadora a la red LAN (se puede hacer a traves de internet tambien)
Primero, se instalará un servidor de streaming.
Instalar icecast2 (sudo apt install icecast2).
Editar el fichero /etc/icecast2/icecast.xml para escuchar en todas las IP del PC, descomentando y poniendo:">
</head>
<body><nav class="navbar is-transparent " role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a class="navbar-item" href="https://imlauera.github.io/">
      <figure class="image">
        <img alt="" class="is-rounded" src="/img/memememe.jpg">
      </figure>
    </a>
    <a class="navbar-item" href="https://imlauera.github.io/">
      Imlauer
    </a>
    <a class="navbar-item" href="/acerca/">
      Acerca de Mi
    </a>
  </div>
  
  
</nav>

  <section>
    <section class='hero is-small is-link is-fullwidth'>
      <div class="hero-body">
<div class="container">
  <h1 class="title">
    Crear Stream de audio, radio digital usando icecast darkice
  </h1>
  <h2 class="subtitle">
    <time datetime='2023-04-30T17:12:55-03:00'>
      April 30, 2023
    </time>
    
    <br>
    
    
    
    <a class="tag is-info" href="https://imlauera.github.io/tags/radio/">Radio</a>
    
    
    
    
    <a class="tag is-info" href="https://imlauera.github.io/tags/digital/">Digital</a>
    
    
    
    
    <a class="tag is-info" href="https://imlauera.github.io/tags/stream/">Stream</a>
    
    
    
    
    <a class="tag is-info" href="https://imlauera.github.io/tags/audio/">Audio</a>
    
    
    
  </h2>
</div>

      </div>
    </section>
    <section class="section">
      <div class="container">
<div class="content is-medium">
  <p>No necesitan usar SoundWire ni pagar la version premium</p>
<h3 id="instalar-icecast-y-darkice">Instalar icecast y darkice</h3>
<p>Resumidamente IceCast crea el servidor y darkice transmite el audio a ese servidor.
En este caso veremos como podemos transmitir el audio interno de tu computadora a la red LAN (se puede hacer a traves de internet tambien)</p>
<p>Primero, se instalará un servidor de streaming.</p>
<p>Instalar icecast2 (<code>sudo apt install icecast2</code>).
Editar el fichero <code>/etc/icecast2/icecast.xml</code> para escuchar en todas las IP del PC, descomentando y poniendo:</p>
<h4 id="configurar-icecast">Configurar icecast</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&lt;bind-adress&gt;0.0.0.0&lt;/bind-adress&gt;
</span></span></code></pre></div><p>Asi me quedo esa parte a mi:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&lt;hostname&gt;192.168.0.201&lt;/hostname&gt;
</span></span><span style="display:flex;"><span>&lt;!-- You may have multiple &lt;listen-socket&gt; elements --&gt;
</span></span><span style="display:flex;"><span>&lt;listen-socket&gt;
</span></span><span style="display:flex;"><span>&lt;port&gt;5553&lt;/port&gt;
</span></span><span style="display:flex;"><span>&lt;bind-address&gt;0.0.0.0&lt;/bind-address&gt;
</span></span><span style="display:flex;"><span>&lt;shoutcast-mount&gt;/stream&lt;/shoutcast-mount&gt;
</span></span><span style="display:flex;"><span>&lt;/listen-socket&gt;
</span></span></code></pre></div><p>Yo cambie el puerto a 5553 y en el hostname puse mi IP local</p>
<p>Arrancar icecast2 con:
<code>sudo /etc/init.d/icecast2 restart</code>
O si usan systemd:
<code>sudo systemctl restart icecast2.service</code></p>
<p>A continuación, instalamos un módulo para servir el audio local (pulse) como si fuese un mp3.</p>
<h4 id="instalar-darkice">Instalar darkice</h4>
<p><code>sudo apt install darkice</code>
Crear el fichero ~/darkice.cfg con el siguiente contenido:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>general<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>duration <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#75715e"># duration in s, 0 forever</span>
</span></span><span style="display:flex;"><span>bufferSecs <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#75715e"># buffer, in seconds</span>
</span></span><span style="display:flex;"><span>reconnect <span style="color:#f92672">=</span> yes <span style="color:#75715e"># reconnect if disconnected</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>input<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>device <span style="color:#f92672">=</span> pulse <span style="color:#75715e"># for Pulseaudio</span>
</span></span><span style="display:flex;"><span>sampleRate <span style="color:#f92672">=</span> <span style="color:#ae81ff">44100</span> <span style="color:#75715e"># sample rate 11025, 22050 or 44100</span>
</span></span><span style="display:flex;"><span>bitsPerSample <span style="color:#f92672">=</span> <span style="color:#ae81ff">16</span> <span style="color:#75715e"># bits</span>
</span></span><span style="display:flex;"><span>channel <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span> <span style="color:#75715e"># 2 = stereo</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>icecast2-0<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>bitrateMode <span style="color:#f92672">=</span> vbr <span style="color:#75715e"># variable bit rate (cbr for constant)</span>
</span></span><span style="display:flex;"><span>quality <span style="color:#f92672">=</span> 1.0 <span style="color:#75715e"># 1.0 is best quality</span>
</span></span><span style="display:flex;"><span>format <span style="color:#f92672">=</span> mp3 <span style="color:#75715e"># format</span>
</span></span><span style="display:flex;"><span>bitrate <span style="color:#f92672">=</span> <span style="color:#ae81ff">256</span> <span style="color:#75715e"># bitrate</span>
</span></span><span style="display:flex;"><span>server <span style="color:#f92672">=</span> localhost <span style="color:#75715e"># or IP</span>
</span></span><span style="display:flex;"><span>port <span style="color:#f92672">=</span> <span style="color:#ae81ff">5553</span> <span style="color:#75715e"># port for IceCast2 access</span>
</span></span><span style="display:flex;"><span>password <span style="color:#f92672">=</span> hackme <span style="color:#75715e"># source password to the IceCast2 server</span>
</span></span><span style="display:flex;"><span>mountPoint <span style="color:#f92672">=</span> mystream.mp3 <span style="color:#75715e"># mount point on the IceCast2 server or any name</span>
</span></span><span style="display:flex;"><span>name <span style="color:#f92672">=</span> mystream
</span></span></code></pre></div><p>Arrancar el módulo darkice con:
<code>darkice -c ~/darkice.cfg</code> (sin root)</p>
<p>Podemos comprobar que el servidor icecast2 y el módulo funcionan, dirigiendo el navegador a http://192.168.0.201:5553 y ver que hay montado un stream llamado mystream.mp3 (a través de darkice) si no aparece es porque fallo darkice.</p>
<p><strong>OJO</strong>: Yo tuve un problema con pulseaudio lo solucione moviendo la carpeta $HOME/.config/pulse a $HOME/.config/pulse.old con el comando mv.
Luego ejecute</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>systemctl --user status pulseaudio.service
</span></span><span style="display:flex;"><span>pulseaudio --start
</span></span><span style="display:flex;"><span>pulseaudio --check
</span></span></code></pre></div><h4 id="reproducimos-musica">Reproducimos musica</h4>
<p>Ponemos podes escuchar musica desde el navegador o desde mpv. Por último, configuramos el audio en pulse audio. Ejecutamos en una consola <code>pavucontrol</code>. Nos aseguramos de que:</p>
<p>Recording (Grabación): Deberíamos ver la aplicación &ldquo;darkice&rdquo; si no se ve nada hubo un problema con darkice no esta ejecutando porque hubo un problema de configuracion.
Input Devices (Dispositivos de entrada): Miramos que aparezca el que seleccionamos para darkice pidiendo que muestre todos los dispositivos y nos aseguramos que no esté en mute.
Por último, desde tu Android baja mpv o VLC accede al ip del servidor de stream de audio en mi caso http://192.168.0.201:5553 y apreta en donde dice M3U y lo abris con MPV luego pones Play in background que esta en el menu de engranaje.</p>
<p>Basado en  : <a href="https://www.sing-group.org/~lipido/blog/2012/01/10/hacer-streaming-de-spotify-en-ubuntu-1104-con-icecast2-darkice-y-pulseaudio/">https://www.sing-group.org/~lipido/blog/2012/01/10/hacer-streaming-de-spotify-en-ubuntu-1104-con-icecast2-darkice-y-pulseaudio/</a></p>

</div>


      </div>
    </section>
  </section><script 
src="/quiz/quizdown.js">
</script>
<script 
src="/quiz/quizdownKatex.js">
</script>
<script 
src="/quiz/quizdownHighlight.js">
</script>
<script>quizdown.register(quizdownHighlight).register(quizdownKatex).init()</script> 
<footer class="footer">
  <div class="content has-text-centered">
    
    
    <p>
      
      <a class="" href="https://imlauera.github.io/index.xml" target="_blank">
        <span>
          RSS
        </span>
      </a>
      
      | <a href="https://imlauera.github.io" target="_blank">Andres Imlauer.</a> 

      
      
    </p>
    
  </div>




<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({ tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]} })
</script>
</footer>


</body>
</html>
