<!DOCTYPE html>
<html lang="es">





<head>
  <meta property="og:url" content="https://imlauera.github.io/cookies_console_browser/">
  <meta property="og:site_name" content="Imlauer">
  <meta property="og:title" content="Loading cookies from Falkon into a console web-browser or yt-dlp.">
  <meta property="og:description" content="cp ~/.config/falkon/profiles/default/Cookies /tmp/falkon_cookies.sqlite sqlite3 -separator $&#39;\t&#39; -noheader /tmp/falkon_cookies.sqlite &#34;SELECT host_key, CASE WHEN host_key LIKE &#39;.%&#39; THEN &#39;TRUE&#39; ELSE &#39;FALSE&#39; END, path, CASE WHEN is_secure=1 THEN &#39;TRUE&#39; ELSE &#39;FALSE&#39; END, CAST((expires_utc/1000000.0 - 11644473600) AS INTEGER), name, value FROM cookies;&#34; &gt; ~/cookies_netscape.txt curl -v -L -b ~/cookies_netscape.txt -c ~/cookies_out.txt &#34;https://inv.nadeko.net/&#34; -o /tmp/forum.html &amp;&amp; w3m /tmp/forum.html curl -v -L -b ~/cookies_out.txt &#34;https://inv.nadeko.net/&#34; -o /tmp/forum.html &amp;&amp; w3m /tmp/forum.html yt-dlp --cookies cookies_out.txt w3m no usa un formato de netscape si queres cargar las cookies de Falkon a netscape: (lo que está abajo no me funcionó). Perfecto — gracias por la aclaración. Te doy una solución práctica (lista para ejecutar) que hace esto:">
  <meta property="og:locale" content="es_es">
  <meta property="og:type" content="article">
    <meta property="article:published_time" content="2025-10-17T15:24:32-03:00">
    <meta property="article:modified_time" content="2025-10-17T15:24:32-03:00">
    <meta property="article:tag" content="Console">

  
  <meta itemprop="name" content="Loading cookies from Falkon into a console web-browser or yt-dlp.">
  <meta itemprop="description" content="cp ~/.config/falkon/profiles/default/Cookies /tmp/falkon_cookies.sqlite sqlite3 -separator $&#39;\t&#39; -noheader /tmp/falkon_cookies.sqlite &#34;SELECT host_key, CASE WHEN host_key LIKE &#39;.%&#39; THEN &#39;TRUE&#39; ELSE &#39;FALSE&#39; END, path, CASE WHEN is_secure=1 THEN &#39;TRUE&#39; ELSE &#39;FALSE&#39; END, CAST((expires_utc/1000000.0 - 11644473600) AS INTEGER), name, value FROM cookies;&#34; &gt; ~/cookies_netscape.txt curl -v -L -b ~/cookies_netscape.txt -c ~/cookies_out.txt &#34;https://inv.nadeko.net/&#34; -o /tmp/forum.html &amp;&amp; w3m /tmp/forum.html curl -v -L -b ~/cookies_out.txt &#34;https://inv.nadeko.net/&#34; -o /tmp/forum.html &amp;&amp; w3m /tmp/forum.html yt-dlp --cookies cookies_out.txt w3m no usa un formato de netscape si queres cargar las cookies de Falkon a netscape: (lo que está abajo no me funcionó). Perfecto — gracias por la aclaración. Te doy una solución práctica (lista para ejecutar) que hace esto:">
  <meta itemprop="datePublished" content="2025-10-17T15:24:32-03:00">
  <meta itemprop="dateModified" content="2025-10-17T15:24:32-03:00">
  <meta itemprop="wordCount" content="857">
  <meta itemprop="keywords" content="Console">
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Loading cookies from Falkon into a console web-browser or yt-dlp.">
  <meta name="twitter:description" content="cp ~/.config/falkon/profiles/default/Cookies /tmp/falkon_cookies.sqlite sqlite3 -separator $&#39;\t&#39; -noheader /tmp/falkon_cookies.sqlite &#34;SELECT host_key, CASE WHEN host_key LIKE &#39;.%&#39; THEN &#39;TRUE&#39; ELSE &#39;FALSE&#39; END, path, CASE WHEN is_secure=1 THEN &#39;TRUE&#39; ELSE &#39;FALSE&#39; END, CAST((expires_utc/1000000.0 - 11644473600) AS INTEGER), name, value FROM cookies;&#34; &gt; ~/cookies_netscape.txt curl -v -L -b ~/cookies_netscape.txt -c ~/cookies_out.txt &#34;https://inv.nadeko.net/&#34; -o /tmp/forum.html &amp;&amp; w3m /tmp/forum.html curl -v -L -b ~/cookies_out.txt &#34;https://inv.nadeko.net/&#34; -o /tmp/forum.html &amp;&amp; w3m /tmp/forum.html yt-dlp --cookies cookies_out.txt w3m no usa un formato de netscape si queres cargar las cookies de Falkon a netscape: (lo que está abajo no me funcionó). Perfecto — gracias por la aclaración. Te doy una solución práctica (lista para ejecutar) que hace esto:">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>
    
    Loading cookies from Falkon into a console web-browser or yt-dlp.
    
  </title>
  <link rel="stylesheet" href='https://imlauera.github.io/css/site.min.css'>
  <link rel="canonical" href="https://imlauera.github.io/cookies_console_browser/">
  <link rel="alternate" type="application/rss&#43;xml" href="https://imlauera.github.io/index.xml" title="Imlauer">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer">
  <meta name="author" content="Imlauer.">
  <meta name="description" content="cp ~/.config/falkon/profiles/default/Cookies /tmp/falkon_cookies.sqlite
sqlite3 -separator $&#39;\t&#39; -noheader /tmp/falkon_cookies.sqlite &#34;SELECT host_key,
 CASE WHEN host_key LIKE &#39;.%&#39; THEN &#39;TRUE&#39; ELSE &#39;FALSE&#39; END,
 path,
 CASE WHEN is_secure=1 THEN &#39;TRUE&#39; ELSE &#39;FALSE&#39; END,
 CAST((expires_utc/1000000.0 - 11644473600) AS INTEGER),
 name,
 value
FROM cookies;&#34; &gt; ~/cookies_netscape.txt
curl -v -L -b ~/cookies_netscape.txt -c ~/cookies_out.txt &#34;https://inv.nadeko.net/&#34; -o /tmp/forum.html &amp;&amp; w3m /tmp/forum.html
curl -v -L -b ~/cookies_out.txt  &#34;https://inv.nadeko.net/&#34; -o /tmp/forum.html &amp;&amp; w3m /tmp/forum.html

yt-dlp --cookies cookies_out.txt
w3m no usa un formato de netscape si queres cargar las cookies de Falkon a netscape: (lo que está abajo no me funcionó).
Perfecto — gracias por la aclaración. Te doy una solución práctica (lista para ejecutar) que hace esto:">
</head>
<body><nav class="navbar is-transparent " role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a class="navbar-item" href="https://imlauera.github.io/">
      <figure class="image">
        <img alt="" class="is-rounded" src="/img/memememe.jpg">
      </figure>
    </a>
    <a class="navbar-item" href="https://imlauera.github.io/">
      Imlauer
    </a>
    <a class="navbar-item" href="/acerca/">
      Acerca de Mi
    </a>
  </div>
  
  
</nav>

  <section>
    <section class='hero is-small is-link is-fullwidth'>
      <div class="hero-body">
<div class="container">
  <h1 class="title">
    Loading cookies from Falkon into a console web-browser or yt-dlp.
  </h1>
  <h2 class="subtitle">
    <time datetime='2025-10-17T15:24:32-03:00'>
      October 17, 2025
    </time>
    
    <br>
    
    
    
    <a class="tag is-info" href="https://imlauera.github.io/tags/console/">Console</a>
    
    
    
  </h2>
</div>

      </div>
    </section>
    <section class="section">
      <div class="container">
<div class="content is-medium">
  <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cp ~/.config/falkon/profiles/default/Cookies /tmp/falkon_cookies.sqlite
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sqlite3 -separator <span style="color:#e6db74">$&#39;\t&#39;</span> -noheader /tmp/falkon_cookies.sqlite <span style="color:#e6db74">&#34;SELECT host_key,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> CASE WHEN host_key LIKE &#39;.%&#39; THEN &#39;TRUE&#39; ELSE &#39;FALSE&#39; END,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> path,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> CASE WHEN is_secure=1 THEN &#39;TRUE&#39; ELSE &#39;FALSE&#39; END,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> CAST((expires_utc/1000000.0 - 11644473600) AS INTEGER),
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> name,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> value
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">FROM cookies;&#34;</span> &gt; ~/cookies_netscape.txt
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -v -L -b ~/cookies_netscape.txt -c ~/cookies_out.txt <span style="color:#e6db74">&#34;https://inv.nadeko.net/&#34;</span> -o /tmp/forum.html <span style="color:#f92672">&amp;&amp;</span> w3m /tmp/forum.html
</span></span><span style="display:flex;"><span>curl -v -L -b ~/cookies_out.txt  <span style="color:#e6db74">&#34;https://inv.nadeko.net/&#34;</span> -o /tmp/forum.html <span style="color:#f92672">&amp;&amp;</span> w3m /tmp/forum.html
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>yt-dlp --cookies cookies_out.txt
</span></span></code></pre></div><h2 id="w3m-no-usa-un-formato-de-netscape-si-queres-cargar-las-cookies-de-falkon-a-netscape-lo-que-está-abajo-no-me-funcionó">w3m no usa un formato de netscape si queres cargar las cookies de Falkon a netscape: (lo que está abajo no me funcionó).</h2>
<p>Perfecto — gracias por la aclaración. Te doy <strong>una solución práctica (lista para ejecutar)</strong> que hace esto:</p>
<ol>
<li>localiza la base de datos de cookies de Falkon,</li>
<li>extrae las cookies de la tabla SQLite (formato Chromium/QtWebEngine),</li>
<li>las convierte al <strong>formato tipo w3m</strong> (una línea por cookie: URL <!-- raw HTML omitted --> NAME <!-- raw HTML omitted --> VALUE <!-- raw HTML omitted --> EXPIRY <!-- raw HTML omitted --> DOMAIN <!-- raw HTML omitted --> PATH <!-- raw HTML omitted --> HTTPONLY),</li>
<li>y te deja el fichero listo para copiar a <code>~/.w3m/cookie</code>.</li>
</ol>
<p>También incluyo notas importantes (cookies cifradas, cerrar Falkon, cómo convertir la marca de tiempo).</p>
<hr>
<h1 id="1-buscar-el-fichero-de-cookies-de-falkon">1) Buscar el fichero de cookies de Falkon</h1>
<p>En muchos navegadores basados en QtWebEngine/Chromium las cookies están en un fichero SQLite llamado <code>Cookies</code> o <code>cookies</code>. Busca así:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># busca en ~/.config y ~/.local por ficheros que se llamen &#34;Cookies&#34; o &#34;cookies*&#34;</span>
</span></span><span style="display:flex;"><span>find ~/.config ~/.local -type f <span style="color:#ae81ff">\(</span> -iname Cookies -o -iname <span style="color:#e6db74">&#39;cookies*&#39;</span> <span style="color:#ae81ff">\)</span> 2&gt;/dev/null
</span></span></code></pre></div><p>Si aparece algo como <code>~/.config/falkon/Default/Cookies</code> o <code>~/.local/share/falkon/Network/Cookies</code> ese es el fichero que necesitamos.</p>
<blockquote>
<p>Consejo: <strong>cierra Falkon</strong> antes de trabajar con la base de datos (está bloqueada mientras el navegador corre).</p>
</blockquote>
<hr>
<h1 id="2-script-python-que-extrae-y-convierte-a-formato-w3m">2) Script Python que extrae y convierte a formato w3m</h1>
<p>Crea un archivo <code>falkon_cookies_to_w3m.py</code> con este contenido (usa Python 3):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#!/usr/bin/env python3</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># falkon_cookies_to_w3m.py</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Extrae cookies desde una DB tipo Chromium (tabla `cookies`) y emite líneas:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;url&gt;\t&lt;name&gt;\t&lt;value&gt;\t&lt;expiry_unix&gt;\t&lt;domain&gt;\t&lt;path&gt;\t&lt;httponly_flag&gt;\n</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Uso:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#   python3 falkon_cookies_to_w3m.py /ruta/al/fichero/Cookies &gt; cookies_w3m.txt</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> sys<span style="color:#f92672">,</span> sqlite3<span style="color:#f92672">,</span> os<span style="color:#f92672">,</span> urllib.parse<span style="color:#f92672">,</span> datetime
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> len(sys<span style="color:#f92672">.</span>argv) <span style="color:#f92672">!=</span> <span style="color:#ae81ff">2</span>:
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Uso: python3 falkon_cookies_to_w3m.py /ruta/al/fichero/Cookies&#34;</span>, file<span style="color:#f92672">=</span>sys<span style="color:#f92672">.</span>stderr)
</span></span><span style="display:flex;"><span>    sys<span style="color:#f92672">.</span>exit(<span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>dbpath <span style="color:#f92672">=</span> sys<span style="color:#f92672">.</span>argv[<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>exists(dbpath):
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;No existe:&#34;</span>, dbpath, file<span style="color:#f92672">=</span>sys<span style="color:#f92672">.</span>stderr)
</span></span><span style="display:flex;"><span>    sys<span style="color:#f92672">.</span>exit(<span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">webkit_to_unix</span>(webkit_us):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Chrome/WebKit timestamps son microsegundos desde 1601-01-01</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        us <span style="color:#f92672">=</span> int(webkit_us)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> us <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> int(us<span style="color:#f92672">/</span><span style="color:#ae81ff">1_000_000</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">11644473600</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>con <span style="color:#f92672">=</span> sqlite3<span style="color:#f92672">.</span>connect(dbpath)
</span></span><span style="display:flex;"><span>con<span style="color:#f92672">.</span>text_factory <span style="color:#f92672">=</span> <span style="color:#66d9ef">lambda</span> b: b<span style="color:#f92672">.</span>decode(errors<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ignore&#39;</span>)
</span></span><span style="display:flex;"><span>cur <span style="color:#f92672">=</span> con<span style="color:#f92672">.</span>cursor()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Intenta columnas comunes en &#39;cookies&#39; de Chromium: host_key, name, value, path, expires_utc, secure, httponly, encrypted_value</span>
</span></span><span style="display:flex;"><span>cols_try <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;host_key&#34;</span>,<span style="color:#e6db74">&#34;name&#34;</span>,<span style="color:#e6db74">&#34;value&#34;</span>,<span style="color:#e6db74">&#34;path&#34;</span>,<span style="color:#e6db74">&#34;expires_utc&#34;</span>,<span style="color:#e6db74">&#34;secure&#34;</span>,<span style="color:#e6db74">&#34;httponly&#34;</span>,<span style="color:#e6db74">&#34;encrypted_value&#34;</span>]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Query defensiva: selecciona sólo columnas que existan</span>
</span></span><span style="display:flex;"><span>cur<span style="color:#f92672">.</span>execute(<span style="color:#e6db74">&#34;PRAGMA table_info(cookies)&#34;</span>)
</span></span><span style="display:flex;"><span>tblinfo <span style="color:#f92672">=</span> [r[<span style="color:#ae81ff">1</span>] <span style="color:#66d9ef">for</span> r <span style="color:#f92672">in</span> cur<span style="color:#f92672">.</span>fetchall()]
</span></span><span style="display:flex;"><span>present <span style="color:#f92672">=</span> [c <span style="color:#66d9ef">for</span> c <span style="color:#f92672">in</span> cols_try <span style="color:#66d9ef">if</span> c <span style="color:#f92672">in</span> tblinfo]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>select_cols <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;, &#34;</span><span style="color:#f92672">.</span>join(present)
</span></span><span style="display:flex;"><span>q <span style="color:#f92672">=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;SELECT </span><span style="color:#e6db74">{</span>select_cols<span style="color:#e6db74">}</span><span style="color:#e6db74"> FROM cookies&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> row <span style="color:#f92672">in</span> cur<span style="color:#f92672">.</span>execute(q):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># mapear por orden</span>
</span></span><span style="display:flex;"><span>    d <span style="color:#f92672">=</span> dict(zip(present, row))
</span></span><span style="display:flex;"><span>    host <span style="color:#f92672">=</span> d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;host_key&#34;</span>,<span style="color:#e6db74">&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>    name <span style="color:#f92672">=</span> d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;name&#34;</span>,<span style="color:#e6db74">&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># si &#39;value&#39; vacío, intentar &#39;encrypted_value&#39; (no intentamos descifrar aquí)</span>
</span></span><span style="display:flex;"><span>    value <span style="color:#f92672">=</span> d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;value&#34;</span>) <span style="color:#f92672">or</span> d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;encrypted_value&#34;</span>) <span style="color:#f92672">or</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    path <span style="color:#f92672">=</span> d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;path&#34;</span>) <span style="color:#f92672">or</span> <span style="color:#e6db74">&#34;/&#34;</span>
</span></span><span style="display:flex;"><span>    expires <span style="color:#f92672">=</span> webkit_to_unix(d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;expires_utc&#34;</span>) <span style="color:#f92672">or</span> <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>    secure <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">if</span> d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;secure&#34;</span>) <span style="color:#66d9ef">else</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    httponly <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">if</span> d<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;httponly&#34;</span>) <span style="color:#66d9ef">else</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># construir URL base (scheme asumido https si secure, sino http)</span>
</span></span><span style="display:flex;"><span>    scheme <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https&#34;</span> <span style="color:#66d9ef">if</span> secure <span style="color:#66d9ef">else</span> <span style="color:#e6db74">&#34;http&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># si host no empieza por dominio, limpiarlo</span>
</span></span><span style="display:flex;"><span>    host_clean <span style="color:#f92672">=</span> host<span style="color:#f92672">.</span>lstrip(<span style="color:#e6db74">&#34;.&#34;</span>)
</span></span><span style="display:flex;"><span>    url <span style="color:#f92672">=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>scheme<span style="color:#e6db74">}</span><span style="color:#e6db74">://</span><span style="color:#e6db74">{</span>host_clean<span style="color:#e6db74">}{</span>path<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># escape tabs/newlines en name/value</span>
</span></span><span style="display:flex;"><span>    safe_name <span style="color:#f92672">=</span> name<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">&#34;</span>,<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">t&#34;</span>)<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>,<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">n&#34;</span>)
</span></span><span style="display:flex;"><span>    safe_value <span style="color:#f92672">=</span> value<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">&#34;</span>,<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">t&#34;</span>)<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>,<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">n&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>url<span style="color:#e6db74">}</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">{</span>safe_name<span style="color:#e6db74">}</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">{</span>safe_value<span style="color:#e6db74">}</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">{</span>expires<span style="color:#e6db74">}</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">{</span>host_clean<span style="color:#e6db74">}</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">{</span>path<span style="color:#e6db74">}</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">{</span>httponly<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>con<span style="color:#f92672">.</span>close()
</span></span></code></pre></div><p>Haz ejecutable y ejecútalo:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chmod +x falkon_cookies_to_w3m.py
</span></span><span style="display:flex;"><span>./falkon_cookies_to_w3m.py /ruta/al/fichero/Cookies &gt; cookies_w3m.txt
</span></span></code></pre></div><hr>
<h1 id="3-resultado-y-prueba-con-w3m">3) Resultado y prueba con w3m</h1>
<p>El fichero <code>cookies_w3m.txt</code> tendrá líneas similares a tu ejemplo (pero con <code>path</code> y <code>httponly</code> al final). Para usarlo con w3m:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># copia al fichero que w3m usa (~/.w3m/cookie)</span>
</span></span><span style="display:flex;"><span>mkdir -p ~/.w3m
</span></span><span style="display:flex;"><span>cp cookies_w3m.txt ~/.w3m/cookie
</span></span><span style="display:flex;"><span><span style="color:#75715e"># prueba</span>
</span></span><span style="display:flex;"><span>w3m https://inv.nadeko.net
</span></span></code></pre></div><p>Si w3m usa exactamente la columna final como en tu ejemplo (<code>5 0</code>), y prefieres tener esos valores fijos, modifica el <code>print(...)</code> en el script para imprimir <code>\t5\t0</code> en lugar de <code>\t{path}\t{httponly}</code>.</p>
<hr>
<h1 id="4-notas-importantes--problemas-comunes">4) Notas importantes / problemas comunes</h1>
<ul>
<li>
<p><strong>No abrir la DB con el navegador en ejecución.</strong> Copia el fichero <code>Cookies</code> antes de leerlo si no quieres cerrar Falkon:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cp /ruta/al/Cookies /tmp/Cookies.copy
</span></span><span style="display:flex;"><span>./falkon_cookies_to_w3m.py /tmp/Cookies.copy &gt; cookies_w3m.txt
</span></span></code></pre></div></li>
<li>
<p><strong>Valores en <code>encrypted_value</code>:</strong> algunos navegadores (Chromium en Linux/Windows) guardan el valor cifrado en <code>encrypted_value</code> y la columna <code>value</code> puede estar vacía. El script copia <code>encrypted_value</code> si <code>value</code> está vacío — <strong>pero no lo descifra</strong>. Descifrarlo requiere acceder a la clave de cifrado del sistema (DPAPI / Keyring) y código adicional (platform-specific). Si ves valores binarios / no legibles, probablemente estén cifrados.</p>
</li>
<li>
<p><strong>Conversión de fecha:</strong> Chromium usa microsegundos desde <code>1601-01-01</code> (WebKit time). El script convierte <code>expires_utc</code> a UNIX epoch (segundos). Fuentes: explicación sobre <code>expires_utc</code> y conversión. (<a href="https://stackoverflow.com/questions/43518199/cookies-expiration-time-format?utm_source=chatgpt.com" title="Cookies expiration time format - google chrome">Stack Overflow</a>)</p>
</li>
<li>
<p><strong>Formato exacto de w3m:</strong> en tu ejemplo la última columna era <code>5 0</code>. Hay ligeras variantes entre versiones/compilaciones; por eso el script emite <code>path</code> y <code>httponly</code>. Si w3m en tu sistema <strong>requiere</strong> exactamente dos números al final (ej. <code>5 0</code>), dime y ajusto el <code>print()</code> para que produzca ese patrón fijo.</p>
</li>
</ul>
<hr>
<h1 id="5-si-quieres-hago-esto-por-vos-ahora">5) Si quieres, hago esto por vos ahora</h1>
<p>Puedo:</p>
<ul>
<li>darte la versión del script que <strong>forza</strong> el formato exactamente igual a tu ejemplo (con <code>5 0</code>),</li>
<li>o modificarlo para <strong>intentar descifrar</strong> <code>encrypted_value</code> si usás Linux (requiere <code>pycryptodomex</code> y leer la clave de GNOME/ KDE keyring — puedo darte pasos).</li>
</ul>
<p>¿Cuál preferís? ¿Que genere las líneas con <code>5 0</code> fijas (para que coincida <em>exactamente</em> con tu ejemplo), o que use <code>path</code>+<code>httponly</code> como en el script?</p>

</div>


      </div>
    </section>
  </section><script 
src="/quiz/quizdown.js">
</script>
<script 
src="/quiz/quizdownKatex.js">
</script>
<script 
src="/quiz/quizdownHighlight.js">
</script>
<script>quizdown.register(quizdownHighlight).register(quizdownKatex).init()</script> 
<footer class="footer">
  <div class="content has-text-centered">
    
    
    <p>
      
      <a class="" href="https://imlauera.github.io/index.xml" target="_blank">
        <span>
          RSS
        </span>
      </a>
      
      | <a href="https://imlauera.github.io" target="_blank">Andres Imlauer.</a> 

      
      
    </p>
    
  </div>




<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({ tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]} })
</script>
</footer>


</body>
</html>
